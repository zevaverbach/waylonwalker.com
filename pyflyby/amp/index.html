<!DOCTYPE html>
<html ⚡ lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width" name="viewport"/>
<link href="/8bitcc.ico" rel="icon" type="image/png"/>
<meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
<link href="8bitcc_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
<link href="8bitcc_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
<link href="8bitcc_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
<link href="8bitcc_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
<link href="8bitcc_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
<link href="8bitcc_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
<link href="8bitcc_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
<link href="8bitcc_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
<title>Smoother Python with automatic imports | pyflyby</title>

<style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom="">
        h1{font-weight:700}h1,h2,h3,h4,h5,h6{font-family:"Space Mono",monospace}h1{font-size:2.5em;font-family:"Space Mono",monospace;color:#6a65ca;color:#ff66c4}h2{font-size:1.63rem;color:#d68eba}h3{font-family:"Space Mono",monospace}p{font-family:"Space Mono",monospace;color:rgba(255,255,255,.6);font-size:21px;font-style:normal;font-variant:normal;font-weight:400;line-height:1.5}@media only screen and (max-width:700px){p{font-size:18px}}@media only screen and (max-width:600px){p{font-size:16px}}@media only screen and (max-width:500px){p{font-size:14px}}@media only screen and (max-width:400px){p{font-size:12px}}blockquote{font-family:"Space Mono",monospace}code{font-family:"Space Mono",monospace}pre{font-family:"Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-family:"Space Mono",monospace;font-family:"Space Mono",monospace}a{font-family:"Space Mono",monospace;color:#6f6bae;text-decoration-color:goldenrod}*{box-sizing:border-box}*{font-family:"SF Mono",Monaco,Inconsolata,"Fira Mono","Droid Sans Mono","Source Code Pro",monospace}article,body,div,footer,header,hgroup,html,nav,section{position:relative;display:flex;align-items:center;flex-direction:column;flex-shrink:0}li,p,ul{margin:0;padding:0}p{margin-bottom:1rem}body,html{min-height:100vh;max-width:100%;width:100%;margin:0;padding:2rem;overflow-x:hidden;color:#fafafa;display:flex;padding:0;background-size:800px;min-height:100vh;background:#282c34;background:linear-gradient(81deg,#282c34 0,#3a2e3d 100%)}section{margin-bottom:5rem}h1{color:#ff66c4}ul.archive-list{box-shadow:0 0 2rem rgba(0,0,0,.3),-8rem -6rem 8rem -6rem rgba(253,221,88,.2),4rem 0 8rem rgba(88,82,185,.3),0 0 2rem -1.6rem rgba(255,215,70,.8);margin:0;padding:0;list-style-type:none;margin-top:1rem}li.post{margin:0;width:100%;list-style-type:none;border-width:1px;border-style:solid;border-image:linear-gradient(to right,#ff66c4,rgba(255,102,196,.2)) 1 0 0 0}li.post:nth-child(2n-1){background-color:rgba(255,255,255,.01);background-image:linear-gradient(22deg,rgba(255,255,255,0),rgba(255,255,255,.03))}li.post:nth-child(2n){background-color:rgba(0,0,0,.02);background-image:linear-gradient(22deg,rgba(0,0,0,0),rgba(0,0,0,.03))}li.post a{color:#fafafa;text-decoration:none}li.post h2,li.post p{max-width:800px;width:calc(100vw - 100px)}li.post h2,li.post p{margin-left:2rem;margin-right:2rem}li.post a:focus-visible h2,li.post:hover h2{color:#ff66c4}p{color:#d3d3d3}li.post a:focus-visible p,li.post:hover p{color:#fafafa}nav{padding:1rem 0;align-items:flex-end;max-width:1000px;width:100%}nav ul{list-style-type:none;display:flex}nav ul li{margin:0 .4rem}nav ul li a{text-align:center;color:#dcdcdc;text-decoration:none;padding:.5rem;margin-left:.1rem;margin-right:.1rem;align-items:flex-end}nav ul li a:focus-visible,nav ul li:hover a,ul.archive-tags li a:focus-visible,ul.archive-tags li:hover a{color:#ff66c4}ul.archive-tags{display:flex;justify-content:center;list-style-type:none;color:#dcdcdc;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:2rem;width:100%}ul.archive-tags li{padding:.2rem 1rem}ul.archive-tags li a{text-decoration:none;color:#fafafa}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}#cover-wrapper{z-index:2;width:100%;min-height:min(420px,100vw / 2.38)}#cover-wrapper img{width:calc(100% + 2rem);margin:-2rem}#title-wrapper{display:flex;justify-content:flex-end;align-items:flex-end;width:calc(100% + 2rem);left:-1rem;padding:8rem 1rem 0;margin-top:-8rem;margin-bottom:2.2rem;background:linear-gradient(149deg,#282c34 0,rgba(58,46,61,0) 100%);border-bottom:1px solid #daa520}#title-wrapper h1{margin-top:8rem;margin-bottom:0;word-break:break-all}#title-wrapper p{text-align:right;padding-left:0;margin-bottom:0;margin-top:0}#title-wrapper a{color:#daa520;text-decoration:none}#title-wrapper .h-card .content{display:flex;flex-direction:column;align-items:flex-end;margin:1rem 0}.p-note,.post-date{color:rgba(255,255,255,.2)}#title-wrapper a:focus-visible,#title-wrapper a:hover{color:#ff66c4}article.blog-post,div#post-body{display:block}article.blog-post .toc a{padding:.5rem}article.blog-post .toc li{margin:1rem}article.blog-post .toc ul{list-style-type:none;border:none;padding:0;margin:0 0 .5rem}article.blog-post div.toc{margin-bottom:1rem}article.blog-post div.toc:after{content:'';display:block;width:50%;border-bottom:1px solid #daa520}h2.toc{margin-bottom:1rem;text-align:center;color:rgba(255,255,255,.8)}.toc li{margin:1rem}.toc a{color:rgba(255,255,255,.5)}.toc a:focus-visible,.toc a:hover{color:#ff66c4}article.blog-post li>code,article.blog-post p>code{background:rgba(255,20,147,.075);padding:0 .2rem}article.blog-post{overflow:hidden;background:rgba(51,0,38,.13);background:hsla(234,33%,15%,.66);display:block;margin:.2rem;width:min(95vw,1000px);position:relative;margin:2rem 0;padding:1rem;padding-bottom:5rem;border-radius:2px;box-shadow:.2rem .2rem 1rem rgba(0,0,0,.2);flex-direction:column;align-items:flex-start;color:#f5f5f5}@media (max-width:650px){article.blog-post{width:100vw;width:min(100vw,1000px)}}@media (max-width:1200px){article.blog-post h1{font-size:2.5rem;padding:1rem}}@media (max-width:1200px){article.blog-post h2{padding-left:1rem}}@media (max-width:1200px){article.blog-post h3{padding-left:1.4rem}}@media (max-width:1200px){article.blog-post h4,article.blog-post h5,article.blog-post h6{padding-left:1.6rem}}@media (max-width:1200px){article.blog-post{margin:0;padding:0;margin:0}}article.blog-post p{margin:2rem .8rem}@media (max-width:1200px){article.blog-post p{margin:2rem .8rem}article.blog-post ol,article.blog-post ul{padding:1.2rem}}article.blog-post pre{margin-bottom:1rem;align-self:flex-start;max-width:calc(100vw - 20px);padding:10px;overflow-x:auto}article.blog-post .highlight{background:#282c34;padding:1rem;margin:0 -1rem;width:calc(100% + 2rem)}article.blog-post a{color:#6f6bae;text-decoration-color:#330026;text-decoration-color:goldenrod}@media (max-width:1200px){p>img{left:-.8rem}}p>img{position:relative;box-shadow:.2rem .2rem 1rem rgba(51,0,38,.4);max-width:1000px;width:95vw;align-self:center;justify-self:center;align-items:center;justify-items:center;margin:auto;left:-1.6rem}.center-img>img{max-width:600px;margin:.5rem}.center-img{display:flex;justify-content:center}strong{color:#d68fbb;display:inline-block;transform:rotate(-2deg)}em{color:#6f6bae;display:inline-block;transform:rotate(.2deg);background:rgba(255,255,255,.04);padding:.1rem .8rem}h2{margin-top:5rem}article.blog-post ul{border-left:1px solid #ff66c4;padding:.5rem 0 .025rem 3rem;margin:2rem}blockquote{color:#777;background:rgba(255,20,147,.05);border-left:2px solid #daa520;font-size:1rem;padding:1rem 0 1rem .5rem;margin:2rem 0}hr{border:none;border-top:1px solid #daa520;margin:5rem auto;background:0 0;width:min(600px,80%)}h1{margin-top:5rem}.tweet{display:flex;justify-content:flex-end;margin:1rem 0}.tweet a{display:inline-block;border-radius:5px;padding:.5rem 1rem;background:#645fc4;color:#fedd58;text-decoration:none;vertical-align:center}.share{max-width:800px;margin:.8rem auto;padding:1rem 2rem;display:flex;align-items:center;border:1px solid #d68fbb;background-color:rgba(214,143,187,.1);border-radius:5px}.share a{padding:.2rem .5rem}.share p{margin:0;padding:0;padding-right:.2rem}.share ul li{margin:0;padding:0}.shrare ul{display:flex;list-style-type:none;margin:0;padding:0;border:none;font-size:1.3rem}.post-body hr{border-top:2px solid rgba(218,165,32,.2);margin:3rem 40%}.h-card{border-radius:5px;display:flex;align-items:center;justify-content:flex-end}.h-card img{width:50px;border-radius:50%;margin:.2rem;display:none}.h-card ul.social{list-style-type:none;border:none;margin:0;padding:0}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}.h-card li{margin:0;padding:0}.toc{width:min(90vw,600px);margin:auto;position:initial;font-size:.8rem;line-height:1.1rem}.toc li{padding:0;margin:0}.toc li.H1,.toc li.H2{padding-top:.8rem}.toc li.H3{padding-left:.5rem}.toc li.H4{padding-left:1rem}.toc li.H5{padding-left:1.25rem}.toc li.H6{padding-left:1.5rem}@media (min-width:1500px){.toc{display:none}}.twitter-tweet{margin:10px auto}.onelinelink-wrapper{max-width:100vw}a.onelinelink{position:relative;left:2rem;background:#262236;margin:-6rem auto 1rem;border:2px solid rgba(255,50,50,.1);max-width:300px;border-radius:15px/45px;display:block;flex-direction:row}@media (max-width:350px){a.onelinelink{left:0;margin-left:.4rem;margin-right:.4rem}}@media (min-width:800px){a.onelinelink{max-width:600px;margin:auto}}@media (min-width:900px){a.onelinelink{max-width:700px}}@media (min-width:1000px){a.onelinelink{max-width:800px}}a.onelinelink{position:relative;z-index:2;margin:4rem;overflow:hidden;display:flex;border:2px solid rgba(255,50,50,.1);background:rgba(255,50,50,.015);background:#262236;text-decoration:none;border-radius:8px;max-height:126px}@media (max-width:800px){a.onelinelink{flex-direction:column;max-height:800px;max-width:300px;margin:4rem auto}}a.onelinelink h2{top:-1.2rem;postition:relative;margin:0;padding:0;font-size:.8rem;font-weight:400}a.onelinelink .right{width:calc(100% - 250px - 4rem);padding:5px 15px}@media (max-width:800px){a.onelinelink .right{width:auto}}a.onelinelink .description{font-size:1rem;line-height:1.2rem;height:calc(100% - 31px - 1rem);padding:0;padding-bottom:1rem;padding-top:.1rem;margin:0}a.onelinelink .url{padding-right:30px;color:rgba(255,255,255,.1);text-align:right;position:relative;z-index:2;background:#262236}a.onelinelink img{max-width:300px;max-height:126px;padding:0;margin:0;border-radius:8px 0 0 8px}a.onelinelink .read-more{font-size:.6rem;color:rgba(255,255,255,.08)}table{border-collapse:collapse;margin:auto}table,td,th{border:1px solid rgba(255,255,255,.4);min-width:5rem;padding:.2rem}.speed-control{display:flex;flex-direction:row;justify-content:center;margin-top:-.2rem;padding:1rem 0 .5rem;background:rgba(0,0,0,.3)}.speed-control button{margin:.4;transition:all .2s;border:.1rem solid #d3d3d3;color:#d3d3d3;background:0 0;text-align:center;padding:.35rem 1.2rem;margin:.1rem .5rem;border-radius:.12rem}.speed-control button:hover{color:#000;background:#d3d3d3}body::-webkit-scrollbar{width:1rem}@media (max-width:1000px){body::-webkit-scrollbar{width:.5rem}}@media (max-width:425px){body::-webkit-scrollbar{width:.25rem}}html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#5651B7}body::-webkit-scrollbar-track{background:#392e3d}body::-webkit-scrollbar-thumb{background-color:#5651b7;border-radius:.25rem;background:#706bd0;background:linear-gradient(180deg,#706bd0 0,#5651b7 100%);border:1px solid rgba(86j,81,183,.5)}
    </style>
<meta content="article" name="og:type" property="og:type"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="#322D39" name="theme-color"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="waylon@waylonwalaker.com" name="og:author_email" property="og:author_email"/><meta content="website" name="og:type" property="og:type"/><meta content="This is not a flaky works half the time kind of plugin, it I can https://youtu.be/2QW5DJiEJH4 Give the video a watch, I did not have noise-cancelling on in obs." name="description" property="description"/><meta content="This is not a flaky works half the time kind of plugin, it I can https://youtu.be/2QW5DJiEJH4 Give the video a watch, I did not have noise-cancelling on in obs." name="og:description" property="og:description"/><meta content="This is not a flaky works half the time kind of plugin, it I can https://youtu.be/2QW5DJiEJH4 Give the video a watch, I did not have noise-cancelling on in obs." name="twitter:description" property="twitter:description"/><meta content="Smoother Python with automatic imports | pyflyby | Waylon Wa" name="og:title" property="og:title"/><meta content="Smoother Python with automatic imports | pyflyby | Waylon Wa" name="twitter:title" property="twitter:title"/><meta content="https://images.waylonwalker.com/pyflyby-og.png" name="og:image" property="og:image"/><meta content="https://images.waylonwalker.com/pyflyby-og.png" name="twitter:image" property="twitter:image"/><meta content="1600" name="og:image:width" property="og:image:width"/><meta content="900" name="og:image:width" property="og:image:width"/><meta content="summary_large_image" name="twitter:card" property="twitter:card"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="@_waylonwalker" name="twitter:creator" property="twitter:creator"/><meta content="Smoother Python with automatic imports | pyflyby" name="title" property="title"/><meta content="markata 0.1.0" name="generator" property="generator"/><script async src="https://cdn.ampproject.org/v0.js"></script><link href="https://waylonwalker.com/pyflyby/" rel="canonical"/><meta content="https://waylonwalker.com/pyflyby/" name="og:url" property="og:url"/></head>
<body>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/archive/">Archive</a></li>
<li>
<a aria-label="RSS" href="/rss.xml">
<svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
</path>
</svg>
</a>
</li>
</ul>
</nav>
<article class="blog-post h-entry">
<!-- <div id='cover-wrapper'>
      <img src='/pyflyby.webp' alt='cover image for article' />
    </div> -->
<div id="title-wrapper">
<a class="u-url" href="https://waylonwalker.com/pyflyby/">
<h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">Smoother Python with automatic imports | pyflyby
                </h1>
</a>
<p><time class="dt-published post-date" datetime="2021-12-20" style="text-align:right;z-index:2">2021-12-20</time>
</p>
<div class="h-card p-author" rel="author">
<div class="content">
<a class="p-name u-url" href="https://waylonwalker.com/">
<p>
<span class="p-given-name">Waylon</span>
<span class="p-family-name">Walker</span>
</p>
</a>
<p class="p-note">Learning in Public <a href="https://twitter.com/_WaylonWalker">@waylonwalker</a></p>
</div>
</div>
<!-- edit -->
<p><a href="https://github.com/WaylonWalker/waylonwalker.com/edit/main/pages/blog/pyflyby.md" title="edit this post">edit<span aria-label="" role="img">✏️</span></a></p>
</div>
<!-- <h2 class='toc'>toc</h2> -->
<!-- -->
<div id="amp-message">
<p style="background: rgba(0,0,0,0.1); padding: .5rem 3rem; margin: 2rem 0rem;">
          ⚡ You've discovered an amp page, if you bump into any issues such as
          syntax highlighting feel free to jump to the <a href="https://waylonwalker.com/pyflyby/">normal page</a>
</p>
</div>
<div id="post-body">
<p>This is not a flaky works half the time kind of plugin, it's a seriously smooth
editing experience.  I've just started using pyflyby, and it is solid so far.
I have automatic imports on every save of a python file in neovim, and
automatic imports on every command in ipython.</p>
<p>I can't tell you how pumped I am for this, and how good its felt to use over
the past few weeks.  It's glorious.</p>
<h2 id="youtube-video">YouTube video</h2>
<p><em>Listen to me rant on how great pyflyby is</em></p>
<p><a href="https://youtu.be/2QW5DJiEJH4">https://youtu.be/2QW5DJiEJH4</a></p>
<p>Give the video a watch, I did not have noise-cancelling on in obs. My
apologies for the background hum and the mic stand bumps. I did my best to fix
them up.</p>
<h2 id="installation">Installation</h2>
<p><em>How to install pyflyby for automatic python imports</em></p>
<p>pyflyby is hosted on pypi, so you can get it with pip.  I have had no issues
installing it on 3.8+ so far.</p>
<div class="highlight"><pre><span></span><code>pip install flybypy
</code></pre></div>
<h2 id="configuration-setup-with-stow">Configuration setup with stow</h2>
<p><em>always stow your dotfiles</em></p>
<p>If you're going to configure any of your tools the first thing you should do is
set it up with stow, seriously don't sleep on the stow.  If you don't have stow
installed or choose not to use stow you can skip this part.</p>
<div class="highlight"><pre><span></span><code><span class="nb">cd</span> ~/dotfiles
mkdir ipython
touch ipython/.pyflyby
stow ipython
</code></pre></div>
<blockquote>
<p>Seriously don't sleep on the stow.</p>
</blockquote>
<h2 id="how-to-configure-pyflyby">How to Configure pyflyby</h2>
<p><em>it's just a file full of import statements</em></p>
<p><code>pyflyby</code> is configured simply by putting all of your import statements that you
want to automatically import into your <code>~/.pyflyby</code> file.  You can <code>import
pandas</code>, <code>from pandas import DataFrame</code>, or even <code>import pandas as pd</code>, and all
of these will work pretty much as expected.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># comments start with a #</span>
<span class="c1"># import your favorite libraries</span>
<span class="kn">import</span> <span class="nn">visidata</span> <span class="k">as</span> <span class="nn">vd</span>
<span class="kn">import</span> <span class="nn">fsspec</span>
<span class="kn">import</span> <span class="nn">difflib</span>
<span class="kn">import</span> <span class="nn">s3fs</span>
<span class="kn">import</span> <span class="nn">seaborn</span> <span class="k">as</span> <span class="nn">sns</span>
<span class="kn">import</span> <span class="nn">plotly</span>

<span class="c1"># also supports from imports</span>
<span class="kn">from</span> <span class="nn">rich.layout</span> <span class="kn">import</span> <span class="n">Layout</span>
<span class="kn">from</span> <span class="nn">rich.live</span> <span class="kn">import</span> <span class="n">Live</span>

<span class="c1"># duplicates are allowed</span>
<span class="kn">import</span> <span class="nn">plotly</span>
<span class="kn">import</span> <span class="nn">plotly</span>

<span class="c1"># duplicate names from different libraries are not allowed</span>
<span class="kn">import</span> <span class="nn">copy</span>
<span class="kn">from</span> <span class="nn">numpy</span> <span class="kn">import</span> <span class="n">copy</span>
</code></pre></div>
<blockquote>
<p>Add all the things you would like to be imported automatically, just as you
would import them.  I went kinda crazy and added over 200 to mine based on
packages that I use.</p>
</blockquote>
<h2 id="commas-are-even-supported">Commas are even supported</h2>
<p><em>yep all the import styles are supported</em></p>
<p>This following example will set up auto import for both DataFrame and Series,
they will both work separately.  I removed these from my config as I felt it
was cleaner without, but it works with them.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">pandas</span> <span class="kn">import</span> <span class="n">DataFrame</span><span class="p">,</span> <span class="n">Series</span>
</code></pre></div>
<blockquote>
<p>Even imports with a comma will be treated separately.</p>
</blockquote>
<h2 id="jupyter-note">Jupyter note!</h2>
<p><em>Both work the same, use what your comfortable with</em></p>
<p>I only really mention ipython here, but the same all applies to Jupyter as
well.  I just really like ipython itself, c'mon its right there in the terminal
integrating with the rest of your terminal experience so well.</p>
<h2 id="ipython-setup">Ipython setup</h2>
<p><em>Automatically import python libraries in ipython with pyflyby</em></p>
<p>The recommended way to set uppyflybyfrom the docs is to run the following
magic command.  This works well, but I want even less typing, I want pyflyby
automatically installed and importing things without me even thinking about it.</p>
<div class="highlight"><pre><span></span><code><span class="o">%</span><span class="n">load_ext</span> <span class="n">pyflyby</span>
</code></pre></div>
<p><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/load_ext_pyflyby.gif" width="500"></amp-img></p>
<h2 id="ipython-setup-next-level">Ipython setup next level</h2>
<p><em>automatically import modules in python <strong>without %load_ext</strong></em></p>
<p>I really want pyflyby to just work in every environment without me thinking
much about it.  I want it to load automatically, and even to attempt to install
itself if it's missing.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">IPython</span> <span class="kn">import</span> <span class="n">get_ipython</span>
<span class="kn">import</span> <span class="nn">subprocess</span>


<span class="n">ipython</span> <span class="o">=</span> <span class="n">get_ipython</span><span class="p">()</span>

<span class="k">try</span><span class="p">:</span>
    <span class="n">ipython</span><span class="o">.</span><span class="n">magic</span><span class="p">(</span><span class="s2">"load_ext pyflyby"</span><span class="p">)</span>
<span class="k">except</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span>
    <span class="nb">print</span><span class="p">(</span><span class="s2">"installing pyflyby"</span><span class="p">)</span>
    <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
        <span class="p">[</span><span class="s2">"pip"</span><span class="p">,</span> <span class="s2">"install"</span><span class="p">,</span> <span class="s2">"pyflyby"</span><span class="p">],</span>
        <span class="n">stdout</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
        <span class="n">stderr</span><span class="o">=</span><span class="n">subprocess</span><span class="o">.</span><span class="n">DEVNULL</span><span class="p">,</span>
    <span class="p">)</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
    <span class="n">ipython</span><span class="o">.</span><span class="n">magic</span><span class="p">(</span><span class="s2">"load_ext pyflyby"</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p>Note: if installation fails you will still make it into ipython, there will
just be a traceback to the failed command as you enter.</p>
</blockquote>
<p>I've had zero issues with this, but if there ever comes a time when it does
not work in certain environments for you.  I'd strongly suggest you to add this
to a separate profile.</p>
<div class="onelinelink-wrapper">
<a class="onelinelink" href="https://waylonwalker.com/ipython-config/">
<amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/ipython-config-og_250x140.png" width="500"></amp-img>
<p><strong>
 Ipython-Config
</strong></p>
</a>
</div>
<blockquote>
<p>Check out this article for a bit more in depth ipython configuration</p>
</blockquote>
<h2 id="ipython-auto-import-examples">ipython auto import examples</h2>
<p>pyflyby can import all the various import types just fine.</p>
<ul>
<li>import something</li>
<li>from module import something</li>
<li>import something as alias</li>
</ul>
<div class="highlight"><pre><span></span><code><span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://waylonwalker.com/cars.csv"</span><span class="p">)</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
</code></pre></div>
<h2 id="getting-help">Getting Help</h2>
<p>Want help on something that you have in your pyflyby config, just give it the
<code>?</code>, <code>??</code>, or <code>help</code> and pyflyby will import it for you.</p>
<div class="highlight"><pre><span></span><code><span class="n">Popen</span><span class="err">?</span>
</code></pre></div>
<div class="onelinelink-wrapper">
<a class="onelinelink" href="https://waylonwalker.com/ipython-help/">
<amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/ipython-help-og_250x140.png" width="500"></amp-img>
<p><strong>
 Just Ask Ipython for help
</strong></p>
</a>
</div>
<h2 id="autocomplete">Autocomplete</h2>
<p><em>This is next level python auto-import</em></p>
<p>pyflyby even goes as far as helping tab completion.  If you try to tab complete
<code>Pop</code> it will complete to <code>Popen</code> without even adding <code>Popen</code> to your local
namespace.  If you ask for something inside of a module i.e. <code>requests.&lt;tab&gt;</code>,
then it will import requests.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># does not populate the namespace</span>
<span class="n">Pop</span><span class="o">&lt;</span><span class="n">tab</span><span class="o">&gt;</span>

<span class="c1"># !!does populate the local namespace</span>
<span class="n">requests</span><span class="o">.&lt;</span><span class="n">tab</span><span class="o">&gt;</span>
</code></pre></div>
<h2 id="what-happens-when-a-module-is-not-installed">What happens when a module is not installed</h2>
<p><em>ModuleNotFoundError</em></p>
<p>When you are in an environment where you do not have a module installed that is
in your pyflyby config, it will throw a <code>ModuleNotFoundError</code> when it tries to
import, and it will not import or try to install for you.  You will have to
change environments or install that module.</p>
<div class="highlight"><pre><span></span><code><span class="err">❯</span> <span class="n">pd</span><span class="err">?</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span> <span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span> <span class="n">Error</span> <span class="n">attempting</span> <span class="n">to</span> <span class="s1">'import pandas as pd'</span><span class="p">:</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">'pandas'</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span> <span class="n">Traceback</span> <span class="p">(</span><span class="n">most</span> <span class="n">recent</span> <span class="n">call</span> <span class="n">last</span><span class="p">):</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span>   <span class="n">File</span> <span class="s2">"/home/u_walkews/.local/lib/python3.8/site-packages/pyflyby/_autoimp.py"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1610</span><span class="p">,</span> <span class="ow">in</span> <span class="n">_try_import</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span>     <span class="n">exec_</span><span class="p">(</span><span class="n">stmt</span><span class="p">,</span> <span class="n">scratch_namespace</span><span class="p">)</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span>   <span class="n">File</span> <span class="s2">"&lt;string&gt;"</span><span class="p">,</span> <span class="n">line</span> <span class="mi">1</span><span class="p">,</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>
<span class="p">[</span><span class="n">PYFLYBY</span><span class="p">]</span> <span class="ne">ModuleNotFoundError</span><span class="p">:</span> <span class="n">No</span> <span class="n">module</span> <span class="n">named</span> <span class="s1">'pandas'</span>
<span class="n">Object</span> <span class="err">`</span><span class="n">pd</span><span class="err">`</span> <span class="ow">not</span> <span class="n">found</span><span class="o">.</span>

<span class="err">❯</span> <span class="n">df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s2">"https://waylonwalker.com/cars.csv"</span><span class="p">)</span>
<span class="o">&lt;</span><span class="n">ipython</span><span class="o">-</span><span class="nb">input</span><span class="o">-</span><span class="mi">3</span><span class="o">-</span><span class="mi">69</span><span class="n">b040434562</span><span class="o">&gt;</span><span class="p">:</span><span class="mi">1</span> <span class="ow">in</span> <span class="o">&lt;</span><span class="n">module</span><span class="o">&gt;</span>

<span class="ne">NameError</span><span class="p">:</span> <span class="n">name</span> <span class="s1">'pd'</span> <span class="ow">is</span> <span class="ow">not</span> <span class="n">defined</span>
</code></pre></div>
<h2 id="nvim-pyflyby-setup">nvim pyflyby setup</h2>
<p><em>automatically importing python modules in vim, neovim, nvim</em></p>
<p>This is by far the best part of this article.  It makes development so fluid.
It's not necessarily all about the speed.  It really helps you move at the
speed of your thoughts, without needing to worry about imports.  Remembering
where deeply nested modules are does not need to be a thing.</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="p">!</span> s:PyPreSave<span class="p">()</span>
    Black
<span class="k">endfunction</span>

<span class="k">function</span><span class="p">!</span> s:PyPostSave<span class="p">()</span>
    execute <span class="s2">"silent !tidy-imports --black --quiet --replace-star-imports --action REPLACE "</span> . bufname<span class="p">(</span><span class="s2">"%"</span><span class="p">)</span>
    execute <span class="s2">"e"</span>
<span class="k">endfunction</span>

<span class="p">:</span>command<span class="p">!</span> PyPreSave :<span class="k">call</span> s:PyPreSave<span class="p">()</span>
<span class="p">:</span>command<span class="p">!</span> PyPostSave :<span class="k">call</span> s:PyPostSave<span class="p">()</span>

augroup waylonwalker
    autocmd<span class="p">!</span>
    autocmd bufwritepre *.<span class="k">py</span> execute <span class="s1">'PyPreSave'</span>
    autocmd bufwritepost *.<span class="k">py</span> execute <span class="s1">'PyPostSave'</span>
    autocmd bufwritepost .tmux.<span class="k">conf</span> execute <span class="s1">':!tmux source-file %'</span>
    autocmd bufwritepost .tmux.local.<span class="k">conf</span> execute <span class="s1">':!tmux source-file %'</span>
    autocmd bufwritepost *.<span class="k">vim</span> execute <span class="s1">':source %'</span>
augroup <span class="k">end</span>
</code></pre></div>
<p><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/pyflyby-nvim.gif" width="500"></amp-img></p>
<h2 id="refactoring">refactoring</h2>
<p><em>This is where it really shines</em></p>
<p>This setup really shines when you are refactoring.  You can freely move modules
and classes around without worrying about bringing imports with them. Often
when refactoring some modules from one file to another the most tedious part is
editing the imports.  Often you can't even grab whole lines because there are
several imports and some are needed in both places but not all.  pyflyby
handles all this like a champ.</p>
<p><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/pyflyby-refactoring.gif" width="500"></amp-img></p>
<h2 id="where-to-install-for-vim">Where to install for vim</h2>
<p><em>just make sure the tidy-imports command is available to vim</em></p>
<p>pyflyby goes into the environment that you have active at the time that you
start neovim.  Typically, this is the virtual environment that I am using for
the project I am editing.</p>
<h2 id="what-gets-importedremoved">What gets imported/removed</h2>
<p><em>only give me what I actually use</em></p>
<p>Anything within the base config of pyflyby or your own config specified in
<code>~/.pyflyby</code> will get automatically imported if it is used within the
file/console.  If you are working in a file, and stop using a module, it will
automatically get removed.</p>
<ul>
<li>Anything that is used, and found in the config is added</li>
<li>Anything that is unused gets removed</li>
</ul>
<h2 id="where-does-it-put-imports">Where does it put imports</h2>
<p><em>after the last import</em></p>
<p><code>pyflyby</code> does not sort imports into paragraphs or by category.  When it needs
to add new imports.  It will find the last paragraph of imports in your file,
add the new one, and sort that paragraph alphabetically.</p>
<div class="highlight"><pre><span></span><code><span class="kn">from</span> <span class="nn">collections</span> <span class="kn">import</span> <span class="n">Counter</span>

<span class="kn">import</span> <span class="nn">requests</span>

<span class="kn">from</span> <span class="nn">plugins.custom_seo</span> <span class="kn">import</span> <span class="n">post_render</span>
<span class="c1"># &lt;-- pyflyby will put the import here</span>
</code></pre></div>
<h2 id="what-about-isort">What about isort</h2>
<p><em>put those imports where they go</em></p>
<p>I did not like that I was getting pre-commit issues when using pyflyby, so I
added isort to my chain of autocommands to automatically run isort and make my
pre-commit happy.</p>
<div class="highlight"><pre><span></span><code><span class="k">function</span><span class="p">!</span> s:PyPostSave<span class="p">()</span>
    execute <span class="s2">"silent !tidy-imports --black --quiet --replace-star-imports --action REPLACE "</span> . bufname<span class="p">(</span><span class="s2">"%"</span><span class="p">)</span>
    execute <span class="s2">"silent !isort "</span> . bufname<span class="p">(</span><span class="s2">"%"</span><span class="p">)</span>
    execute <span class="s2">"e"</span>
<span class="k">endfunction</span>
</code></pre></div>
<p>Let's write some code</p>
<div class="highlight"><pre><span></span><code><span class="k">def</span> <span class="nf">get</span><span class="p">():</span>
    <span class="sd">"""</span>
<span class="sd">    Get all the posts from waylonwalker.com.</span>

<span class="sd">    Yes theres an rss feed, you should be subscribed if your not already.</span>

<span class="sd">    Oh, and we don't need no stinkin error handing because it's always live</span>
<span class="sd">    """</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"https://waylonwalker.com/rss"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span>
</code></pre></div>
<p>Save it and pyflyby will inject requests into our file automatically, no need
to type that out anymore.</p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">requests</span>

<span class="k">def</span> <span class="nf">get</span><span class="p">():</span>
    <span class="sd">"""</span>
<span class="sd">    Get all the posts from waylonwalker.com.</span>

<span class="sd">    Yes theres an rss feed, you should be subscribed if your not already.</span>

<span class="sd">    Oh, and we don't need no stinkin error handing because it's always live</span>
<span class="sd">    """</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">requests</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">"https://waylonwalker.com/rss"</span><span class="p">)</span>
    <span class="k">return</span> <span class="n">r</span><span class="o">.</span><span class="n">content</span>
</code></pre></div>
<h2 id="what-about-init-apis">What about <strong>init</strong> / api's</h2>
<p><em>careful to fill in the <code>__all__</code> like you are supposed to</em></p>
<!-- ` -->
<p>Files such as <strong>init</strong>.py often import things they do not need, this is simply
there for a convenience of the library user and to make the api cleaner.  These
type of modules should implement a <code>__all__</code> list of all the unused things that
are imported according to pep8.  Pyflyby will remove any unused modules unless
they are in the <code>__all__</code> list.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># snippet from kedro.extras.datasets.pandas</span>

<span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span>
    <span class="s2">"CSVDataSet"</span><span class="p">,</span>
    <span class="s2">"ExcelDataSet"</span><span class="p">,</span>
    <span class="s2">"FeatherDataSet"</span><span class="p">,</span>
    <span class="s2">"GBQTableDataSet"</span><span class="p">,</span>
    <span class="s2">"ExcelDataSet"</span><span class="p">,</span>
    <span class="s2">"AppendableExcelDataSet"</span><span class="p">,</span>
    <span class="s2">"HDFDataSet"</span><span class="p">,</span>
    <span class="s2">"JSONDataSet"</span><span class="p">,</span>
    <span class="s2">"ParquetDataSet"</span><span class="p">,</span>
    <span class="s2">"SQLQueryDataSet"</span><span class="p">,</span>
    <span class="s2">"SQLTableDataSet"</span><span class="p">,</span>
<span class="p">]</span>
</code></pre></div>
<p><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/pyflyby-__all__.gif" width="500"></amp-img></p>
<h2 id="py-command">py command</h2>
<p><em>one liners that need imports</em></p>
<p>pyflyby also comes with a cli command to run one liners.  It's pretty genius,
I'm sure I will find a use or two for it, but so far it's been more of a novelty
for me.</p>
<div class="highlight"><pre><span></span><code>py <span class="nb">help</span> pd
py <span class="nb">help</span> pd.DataFrame

py pd.read_csv <span class="s1">'https://waylonwalker.com/cars.csv'</span>
</code></pre></div>
<p><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/pyflyby-py.gif" width="500"></amp-img></p>
<h2 id="links">Links</h2>
<ul>
<li><a href="https://github.com/deshaw/pyflyby">pyflyby repo</a></li>
<li><a href="https://deshaw.github.io/pyflyby/">docs</a></li>
<li><a href="https://youtu.be/2QW5DJiEJH4">My YouTube Video for pyflyby</a></li>
<li><a href="https://waylonwalker.com/ipython-config/">configuring ipython</a></li>
<li><a href="https://waylonwalker.com/ipython-help/">asking ipython for help??</a></li>
<li><a href="https://waylonwalker.com/cars.csv">sample data I used with pandas</a></li>
<li><a href="https://waylonwalker.com/rss">my rss feed</a></li>
</ul>
<div class="prevnext">

<a class="prev" href="/pytest-capsys">
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5 8.25L9.75 12L13.5 15.75" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"> </path>
</svg>
<div class="prevnext-text">
<p class="prevnext-subtitle">prev</p>
<p class="prevnext-title">Pytest capsys</p>
</div>
</a>
<a class="next" href="/pre-commit-is-awesome">
<div class="prevnext-text">
<p class="prevnext-subtitle">next</p>
<p class="prevnext-title">pre-commit is awesome</p>
</div>
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M10.5 15.75L14.25 12L10.5 8.25" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
</svg>
</a>
</div>
</div>
<hr/>
<div id="show">
</div>
</article>
<h2>Socials</h2>
<ul class="social">
<li>
<a href="https://twitter.com/_WaylonWalker">twitter</a>
</li>
<li>
<a href="https://www.linkedin.com/in/waylonwalker/">LinkedIn</a>
</li>
<li>
<a href="https://github.com/WaylonWalker">GitHub</a>
</li>
<li>
<a href="https://dev.to/waylonwalker">Dev.to</a>
</li>
<li>
<a href="https://www.twitch.tv/waylonwalker">twitch</a>
</li>
</ul>
</body>
</html>