<!DOCTYPE html>
<html ‚ö° lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width" name="viewport"/>
<link href="/8bitcc.ico" rel="icon" type="image/png"/>
<meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
<link href="8bitcc_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
<link href="8bitcc_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
<link href="8bitcc_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
<link href="8bitcc_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
<link href="8bitcc_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
<link href="8bitcc_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
<link href="8bitcc_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
<link href="8bitcc_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
<title>Automating my Post Starter</title>

<style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom="">
        h1{font-weight:700}h1,h2,h3,h4,h5,h6{font-family:"Space Mono",monospace}h1{font-size:2.5em;font-family:"Space Mono",monospace;color:#6a65ca;color:#ff66c4}h2{font-size:1.63rem;color:#d68eba}h3{font-family:"Space Mono",monospace}p{font-family:"Space Mono",monospace;color:rgba(255,255,255,.6);font-size:21px;font-style:normal;font-variant:normal;font-weight:400;line-height:1.5}@media only screen and (max-width:700px){p{font-size:18px}}@media only screen and (max-width:600px){p{font-size:16px}}@media only screen and (max-width:500px){p{font-size:14px}}@media only screen and (max-width:400px){p{font-size:12px}}blockquote{font-family:"Space Mono",monospace}code{font-family:"Space Mono",monospace}pre{font-family:"Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-family:"Space Mono",monospace;font-family:"Space Mono",monospace}a{font-family:"Space Mono",monospace;color:#6f6bae;text-decoration-color:goldenrod}*{box-sizing:border-box}*{font-family:"SF Mono",Monaco,Inconsolata,"Fira Mono","Droid Sans Mono","Source Code Pro",monospace}article,body,div,footer,header,hgroup,html,nav,section{position:relative;display:flex;align-items:center;flex-direction:column;flex-shrink:0}li,p,ul{margin:0;padding:0}p{margin-bottom:1rem}body,html{min-height:100vh;max-width:100%;width:100%;margin:0;padding:2rem;overflow-x:hidden;color:#fafafa;display:flex;padding:0;background-size:800px;min-height:100vh;background:#282c34;background:linear-gradient(81deg,#282c34 0,#3a2e3d 100%)}section{margin-bottom:5rem}h1{color:#ff66c4}ul.archive-list{box-shadow:0 0 2rem rgba(0,0,0,.3),-8rem -6rem 8rem -6rem rgba(253,221,88,.2),4rem 0 8rem rgba(88,82,185,.3),0 0 2rem -1.6rem rgba(255,215,70,.8);margin:0;padding:0;list-style-type:none;margin-top:1rem}li.post{margin:0;width:100%;list-style-type:none;border-width:1px;border-style:solid;border-image:linear-gradient(to right,#ff66c4,rgba(255,102,196,.2)) 1 0 0 0}li.post:nth-child(2n-1){background-color:rgba(255,255,255,.01);background-image:linear-gradient(22deg,rgba(255,255,255,0),rgba(255,255,255,.03))}li.post:nth-child(2n){background-color:rgba(0,0,0,.02);background-image:linear-gradient(22deg,rgba(0,0,0,0),rgba(0,0,0,.03))}li.post a{color:#fafafa;text-decoration:none}li.post h2,li.post p{max-width:800px;width:calc(100vw - 100px)}li.post h2,li.post p{margin-left:2rem;margin-right:2rem}li.post a:focus-visible h2,li.post:hover h2{color:#ff66c4}p{color:#d3d3d3}li.post a:focus-visible p,li.post:hover p{color:#fafafa}nav{padding:1rem 0;align-items:flex-end;max-width:1000px;width:100%}nav ul{list-style-type:none;display:flex}nav ul li{margin:0 .4rem}nav ul li a{text-align:center;color:#dcdcdc;text-decoration:none;padding:.5rem;margin-left:.1rem;margin-right:.1rem;align-items:flex-end}nav ul li a:focus-visible,nav ul li:hover a,ul.archive-tags li a:focus-visible,ul.archive-tags li:hover a{color:#ff66c4}ul.archive-tags{display:flex;justify-content:center;list-style-type:none;color:#dcdcdc;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:2rem;width:100%}ul.archive-tags li{padding:.2rem 1rem}ul.archive-tags li a{text-decoration:none;color:#fafafa}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}#cover-wrapper{z-index:2;width:100%;min-height:min(420px,100vw / 2.38)}#cover-wrapper img{width:calc(100% + 2rem);margin:-2rem}#title-wrapper{display:flex;justify-content:flex-end;align-items:flex-end;width:calc(100% + 2rem);left:-1rem;padding:8rem 1rem 0;margin-top:-8rem;margin-bottom:2.2rem;background:linear-gradient(149deg,#282c34 0,rgba(58,46,61,0) 100%);border-bottom:1px solid #daa520}#title-wrapper h1{margin-top:8rem;margin-bottom:0;word-break:break-all}#title-wrapper p{text-align:right;padding-left:0;margin-bottom:0;margin-top:0}#title-wrapper a{color:#daa520;text-decoration:none}#title-wrapper .h-card .content{display:flex;flex-direction:column;align-items:flex-end;margin:1rem 0}.p-note,.post-date{color:rgba(255,255,255,.2)}#title-wrapper a:focus-visible,#title-wrapper a:hover{color:#ff66c4}article.blog-post,div#post-body{display:block}article.blog-post .toc a{padding:.5rem}article.blog-post .toc li{margin:1rem}article.blog-post .toc ul{list-style-type:none;border:none;padding:0;margin:0 0 .5rem}article.blog-post div.toc{margin-bottom:1rem}article.blog-post div.toc:after{content:'';display:block;width:50%;border-bottom:1px solid #daa520}h2.toc{margin-bottom:1rem;text-align:center;color:rgba(255,255,255,.8)}.toc li{margin:1rem}.toc a{color:rgba(255,255,255,.5)}.toc a:focus-visible,.toc a:hover{color:#ff66c4}article.blog-post li>code,article.blog-post p>code{background:rgba(255,20,147,.075);padding:0 .2rem}article.blog-post{overflow:hidden;background:rgba(51,0,38,.13);background:hsla(234,33%,15%,.66);display:block;margin:.2rem;width:min(95vw,1000px);position:relative;margin:2rem 0;padding:1rem;padding-bottom:5rem;border-radius:2px;box-shadow:.2rem .2rem 1rem rgba(0,0,0,.2);flex-direction:column;align-items:flex-start;color:#f5f5f5}@media (max-width:650px){article.blog-post{width:100vw;width:min(100vw,1000px)}}@media (max-width:1200px){article.blog-post h1{font-size:2.5rem;padding:1rem}}@media (max-width:1200px){article.blog-post h2{padding-left:1rem}}@media (max-width:1200px){article.blog-post h3{padding-left:1.4rem}}@media (max-width:1200px){article.blog-post h4,article.blog-post h5,article.blog-post h6{padding-left:1.6rem}}@media (max-width:1200px){article.blog-post{margin:0;padding:0;margin:0}}article.blog-post p{margin:2rem .8rem}@media (max-width:1200px){article.blog-post p{margin:2rem .8rem}article.blog-post ol,article.blog-post ul{padding:1.2rem}}article.blog-post pre{margin-bottom:1rem;align-self:flex-start;max-width:calc(100vw - 20px);padding:10px;overflow-x:auto}article.blog-post .highlight{background:#282c34;padding:1rem;margin:0 -1rem;width:calc(100% + 2rem)}article.blog-post a{color:#6f6bae;text-decoration-color:#330026;text-decoration-color:goldenrod}@media (max-width:1200px){p>img{left:-.8rem}}p>img{position:relative;box-shadow:.2rem .2rem 1rem rgba(51,0,38,.4);max-width:1000px;width:95vw;align-self:center;justify-self:center;align-items:center;justify-items:center;margin:auto;left:-1.6rem}.center-img>img{max-width:600px;margin:.5rem}.center-img{display:flex;justify-content:center}strong{color:#d68fbb;display:inline-block;transform:rotate(-2deg)}em{color:#6f6bae;display:inline-block;transform:rotate(.2deg);background:rgba(255,255,255,.04);padding:.1rem .8rem}h2{margin-top:5rem}article.blog-post ul{border-left:1px solid #ff66c4;padding:.5rem 0 .025rem 3rem;margin:2rem}blockquote{color:#777;background:rgba(255,20,147,.05);border-left:2px solid #daa520;font-size:1rem;padding:1rem 0 1rem .5rem;margin:2rem 0}hr{border:none;border-top:1px solid #daa520;margin:5rem auto;background:0 0;width:min(600px,80%)}h1{margin-top:5rem}.tweet{display:flex;justify-content:flex-end;margin:1rem 0}.tweet a{display:inline-block;border-radius:5px;padding:.5rem 1rem;background:#645fc4;color:#fedd58;text-decoration:none;vertical-align:center}.share{max-width:800px;margin:.8rem auto;padding:1rem 2rem;display:flex;align-items:center;border:1px solid #d68fbb;background-color:rgba(214,143,187,.1);border-radius:5px}.share a{padding:.2rem .5rem}.share p{margin:0;padding:0;padding-right:.2rem}.share ul li{margin:0;padding:0}.shrare ul{display:flex;list-style-type:none;margin:0;padding:0;border:none;font-size:1.3rem}.post-body hr{border-top:2px solid rgba(218,165,32,.2);margin:3rem 40%}.h-card{border-radius:5px;display:flex;align-items:center;justify-content:flex-end}.h-card img{width:50px;border-radius:50%;margin:.2rem;display:none}.h-card ul.social{list-style-type:none;border:none;margin:0;padding:0}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}.h-card li{margin:0;padding:0}.toc{width:min(90vw,600px);margin:auto;position:initial;font-size:.8rem;line-height:1.1rem}.toc li{padding:0;margin:0}.toc li.H1,.toc li.H2{padding-top:.8rem}.toc li.H3{padding-left:.5rem}.toc li.H4{padding-left:1rem}.toc li.H5{padding-left:1.25rem}.toc li.H6{padding-left:1.5rem}@media (min-width:1500px){.toc{display:none}}.twitter-tweet{margin:10px auto}.onelinelink-wrapper{max-width:100vw}a.onelinelink{position:relative;left:2rem;background:#262236;margin:-6rem auto 1rem;border:2px solid rgba(255,50,50,.1);max-width:300px;border-radius:15px/45px;display:block;flex-direction:row}@media (max-width:350px){a.onelinelink{left:0;margin-left:.4rem;margin-right:.4rem}}@media (min-width:800px){a.onelinelink{max-width:600px;margin:auto}}@media (min-width:900px){a.onelinelink{max-width:700px}}@media (min-width:1000px){a.onelinelink{max-width:800px}}a.onelinelink{position:relative;z-index:2;margin:4rem;overflow:hidden;display:flex;border:2px solid rgba(255,50,50,.1);background:rgba(255,50,50,.015);background:#262236;text-decoration:none;border-radius:8px;max-height:126px}@media (max-width:800px){a.onelinelink{flex-direction:column;max-height:800px;max-width:300px;margin:4rem auto}}a.onelinelink h2{top:-1.2rem;postition:relative;margin:0;padding:0;font-size:.8rem;font-weight:400}a.onelinelink .right{width:calc(100% - 250px - 4rem);padding:5px 15px}@media (max-width:800px){a.onelinelink .right{width:auto}}a.onelinelink .description{font-size:1rem;line-height:1.2rem;height:calc(100% - 31px - 1rem);padding:0;padding-bottom:1rem;padding-top:.1rem;margin:0}a.onelinelink .url{padding-right:30px;color:rgba(255,255,255,.1);text-align:right;position:relative;z-index:2;background:#262236}a.onelinelink img{max-width:300px;max-height:126px;padding:0;margin:0;border-radius:8px 0 0 8px}a.onelinelink .read-more{font-size:.6rem;color:rgba(255,255,255,.08)}table{border-collapse:collapse;margin:auto}table,td,th{border:1px solid rgba(255,255,255,.4);min-width:5rem;padding:.2rem}.speed-control{display:flex;flex-direction:row;justify-content:center;margin-top:-.2rem;padding:1rem 0 .5rem;background:rgba(0,0,0,.3)}.speed-control button{margin:.4;transition:all .2s;border:.1rem solid #d3d3d3;color:#d3d3d3;background:0 0;text-align:center;padding:.35rem 1.2rem;margin:.1rem .5rem;border-radius:.12rem}.speed-control button:hover{color:#000;background:#d3d3d3}body::-webkit-scrollbar{width:1rem}@media (max-width:1000px){body::-webkit-scrollbar{width:.5rem}}@media (max-width:425px){body::-webkit-scrollbar{width:.25rem}}html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#5651B7}body::-webkit-scrollbar-track{background:#392e3d}body::-webkit-scrollbar-thumb{background-color:#5651b7;border-radius:.25rem;background:#706bd0;background:linear-gradient(180deg,#706bd0 0,#5651b7 100%);border:1px solid rgba(86j,81,183,.5)}
    </style>
<meta content="article" name="og:type" property="og:type"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="#322D39" name="theme-color"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="waylon@waylonwalaker.com" name="og:author_email" property="og:author_email"/><meta content="website" name="og:type" property="og:type"/><meta content="One thing we all dread is mundane work of getting started, and all the hoops it When I start a new post I need to cd into my blog directory, start neovim in a f" name="description" property="description"/><meta content="One thing we all dread is mundane work of getting started, and all the hoops it When I start a new post I need to cd into my blog directory, start neovim in a f" name="og:description" property="og:description"/><meta content="One thing we all dread is mundane work of getting started, and all the hoops it When I start a new post I need to cd into my blog directory, start neovim in a f" name="twitter:description" property="twitter:description"/><meta content="Automating my Post Starter | Waylon Walker" name="og:title" property="og:title"/><meta content="Automating my Post Starter | Waylon Walker" name="twitter:title" property="twitter:title"/><meta content="https://images.waylonwalker.com/automating-my-post-starter-og.png" name="og:image" property="og:image"/><meta content="https://images.waylonwalker.com/automating-my-post-starter-og.png" name="twitter:image" property="twitter:image"/><meta content="1600" name="og:image:width" property="og:image:width"/><meta content="900" name="og:image:width" property="og:image:width"/><meta content="summary_large_image" name="twitter:card" property="twitter:card"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="@_waylonwalker" name="twitter:creator" property="twitter:creator"/><meta content="Automating my Post Starter" name="title" property="title"/><meta content="markata 0.1.0" name="generator" property="generator"/><script async src="https://cdn.ampproject.org/v0.js"></script><link href="https://waylonwalker.com/automating-my-post-starter/" rel="canonical"/><meta content="https://waylonwalker.com/automating-my-post-starter/" name="og:url" property="og:url"/></head>
<body>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/archive/">Archive</a></li>
<li>
<a aria-label="RSS" href="/rss.xml">
<svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
</path>
</svg>
</a>
</li>
</ul>
</nav>
<article class="blog-post h-entry">
<!-- <div id='cover-wrapper'>
      <img src='/automating-my-post-starter.webp' alt='cover image for article' />
    </div> -->
<div id="title-wrapper">
<a class="u-url" href="https://waylonwalker.com/automating-my-post-starter/">
<h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">Automating my Post Starter
                </h1>
</a>
<p><time class="dt-published post-date" datetime="2020-12-11" style="text-align:right;z-index:2">2020-12-11</time>
</p>
<div class="h-card p-author" rel="author">
<div class="content">
<a class="p-name u-url" href="https://waylonwalker.com/">
<p>
<span class="p-given-name">Waylon</span>
<span class="p-family-name">Walker</span>
</p>
</a>
<p class="p-note">Learning in Public <a href="https://twitter.com/_WaylonWalker">@waylonwalker</a></p>
</div>
</div>
<!-- edit -->
<p><a href="https://github.com/WaylonWalker/waylonwalker.com/edit/main/pages/blog/automating-my-post-starter.md" title="edit this post">edit<span aria-label="" role="img">‚úèÔ∏è</span></a></p>
</div>
<!-- <h2 class='toc'>toc</h2> -->
<!-- -->
<div id="amp-message">
<p style="background: rgba(0,0,0,0.1); padding: .5rem 3rem; margin: 2rem 0rem;">
          ‚ö° You've discovered an amp page, if you bump into any issues such as
          syntax highlighting feel free to jump to the <a href="https://waylonwalker.com/automating-my-post-starter/">normal page</a>
</p>
</div>
<div id="post-body">
<p>One thing we all dread is mundane work of getting started, and all the hoops it
takes to get going.  This year I want to post more often and I am taking some
steps towards making it easier for myself to just get started.</p>
<p>When I start a new post I need to cd into my blog directory, start neovim in a
markdown file with a clever name, copy some frontmatter boilerplate, update the
post date, add tags, a description, and a cover.</p>
<h2 id="todo-list-for-starting-a-post">Todo List for starting a post</h2>
<ul>
<li>frontmatter template</li>
<li>Title</li>
<li>slug</li>
<li>tags</li>
<li>date</li>
<li>cover</li>
<li>description</li>
<li>create markdown file</li>
<li>open in neovim</li>
</ul>
<h2 id="lets-automate-this">Lets Automate this</h2>
<h3 id="this-aint-no-proper-cli">This aint no proper cli</h3>
<p><em>hot and fast</em></p>
<p>As with many thing running behind the scenes on this site, I am the one and
only user, I have limited time, so this is going to be a bit <strong>hot and fast</strong>.
Let's create a file called new-post.</p>
<p><em><small><mark>start the script new-post</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="ch">#!python</span>
<span class="c1"># new-post</span>
</code></pre></div>
<blockquote>
<p>üëÜ Works on my machine</p>
</blockquote>
<p>If this were something that had more users than me I would probably use
something like click, but for this I want to get it done quick and avoid any
need to manage dependencies.  Be careful if you were to share something with a
<code>#!python</code> as it requries the end user to have the right version of python
ready to go.</p>
<h3 id="title">Title</h3>
<p>The title can't really be automated this is the core idea coming out of my üß†,
but it will be captured through the cli and put into proper position.  For this
I'm going super simple and just pulling it out of <code>sys.argv</code></p>
<p><em><small><mark>set the title</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">sys</span>

<span class="n">title</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">title</span><span class="p">()</span>
</code></pre></div>
<blockquote>
<p>! sys.argv is a list of each argument passed into the script split by spaces.</p>
</blockquote>
<h3 id="slug">slug</h3>
<p>The slug is what I am calling the route and can simply come out of the title
automatically, if I want to shorten it later by hand that will be simple enough
to do manually. All that needs to be done is to lowercase and replace a few
characters with -.</p>
<p><em><small><mark>set the slug</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="n">slug</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">)(</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span> <span class="s2">"-"</span><span class="o">.</span><span class="n">replace</span><span class="p">()</span><span class="s2">"_"</span><span class="p">,</span> <span class="o">-</span><span class="s2">""</span><span class="p">)</span><span class="s2">""</span><span class="p">))</span>
</code></pre></div>
<h3 id="tags">tags</h3>
<p>For tags I decided I wanted the parser to be as simple as possible and didn't
want to dance around any flags.  I am simply just going to look at every
argument passed into the command and see if any of them contain one of my
common tags.  </p>
<p><em><small><mark>parse the tags</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="n">args</span> <span class="o">=</span> <span class="s1">''</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">if</span> <span class="s1">'py'</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'python'</span><span class="p">)</span>

<span class="k">if</span> <span class="s1">'web'</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'webdev'</span><span class="p">)</span>

<span class="k">if</span> <span class="s1">'blog'</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'blog'</span><span class="p">)</span>

<span class="k">if</span> <span class="s1">'data'</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">'data'</span><span class="p">)</span>
</code></pre></div>
<p>ü§∑‚Äç‚ôÇÔ∏è <strong>antipattern</strong>?? The above section does an initialize then modify.  I generally try to avoid this
pattern with something like a list comprehension, but didn't see an obvious
solution so I just went with it.</p>
<h2 id="frontmatter-template">Frontmatter Template</h2>
<p>Now we have enough information going to assemble the frontmatter I use for my
posts.  I am going to just insert the values I need into an f-string.  Since
python 3.6 was released f-strings are my go to templating tool.</p>
<p><em><small><mark>create the markdown</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">datetime</span>

<span class="n">frontmatter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""---</span>
<span class="s2">templateKey: blog-post</span>
<span class="s2">tags: </span><span class="si">{</span><span class="n">tags</span><span class="si">}</span><span class="s2"></span>
<span class="s2">title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"></span>
<span class="s2">date: </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S'</span><span class="p">)</span><span class="si">}</span><span class="s2"></span>
<span class="s2">status: draft</span>
<span class="s2">description: ''</span>
<span class="s2">cover: "/static/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s2">.png"</span>

<span class="s2">---</span>

<span class="s2">"""</span>
</code></pre></div>
<h3 id="create-markdown-file">create markdown file</h3>
<p>Now its time to get down to business and make the post.  First I want to throw
an error if the post already exists, I definitely dont want to blow away an
existing post if a certain slug is already taken.  I am a big fan of custom
error messages and I am going to go ahead and make one here, even though this
is just a quick script.</p>
<p><em><small><mark>custom error</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="k">class</span> <span class="nc">PostExistsError</span><span class="p">(</span><span class="ne">FileExistsError</span><span class="p">):</span>
    <span class="k">pass</span>
</code></pre></div>
<p>I am a <code>pathlib</code> superfan.  It's going to make setting up these paths super
simple.  Note I am going to anchor my directory down with the <code>__file__</code>
variable.  I do this all the time to get paths relative to the module that is
currently running.</p>
<p><em><small><mark>setup paths</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="n">directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s2">/src/pages/blog/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s2">.md"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="k">raise</span> <span class="n">PostExistsError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Post Already exists at </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
</code></pre></div>
<blockquote>
<p><strong>file</strong> is a string that represents the path to the running module</p>
</blockquote>
<p>Finally just write the file.  Here we open the file with a context manager so
that we don't have to worry about closing it when we are done.  Note that we
open it with the <code>w+</code> flag for write and creation.</p>
<p><em><small><mark>write the file</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">"w+"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frontmatter</span><span class="p">)</span>
</code></pre></div>
<h3 id="git-add">git add</h3>
<p>I am not quite ready to pull the trigger on doing an auto commit, but this may
happen in a future version.  For now I want this file easily picked up by vims
<code>:GFiles</code> since I have that is one of my most used hot keys.  To do this the
file at least needs added.  I'm sure there is a better way to do this with a
Git library, but I am used to the command line so I am going to just run a
subprocess.</p>
<p>I am using the <code>subprocess.Popen</code> command since its what I am used to, note
that it will run the task in the background so be sure that you wait on it.
The <code>Popen</code> is great if you have several task that are not dependent on each
other.</p>
<p><em><small><mark>git add <new-post></new-post></mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="n">gadd</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">'cd </span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s1"> &amp;&amp; git add </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="si">}</span><span class="s1"> '</span><span class="p">,</span>
    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">gadd</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div>
<h3 id="open-in-neovim">open in neovim</h3>
<p>Last step of the script is to start writing, I want to be open in my blogs
directory (hence the cd), with the file open, to the right line (+11), and in
insert mode (+star).</p>
<p><em><small><mark>open post in neovim</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="n">nvim</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">'cd </span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s1"> &amp;&amp; nvim +12 +star </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="si">}</span><span class="s1"> '</span><span class="p">,</span>
    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">nvim</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div>
<h2 id="alias">Alias</h2>
<p>Now I want this script to be available everywhere.  I am going to simply add
the following entry to shorten the script and eliminate the need to use the
full path.  I added this to my <code>~/.alias</code>, for you it may be <code>~/.bashrc</code>, or
<code>~/.zshrc</code>.</p>
<div class="highlight"><pre><span></span><code><span class="nb">alias</span> <span class="nv">np</span><span class="o">=</span>~/git/waylonwalkerv2/new-post
</code></pre></div>
<h2 id="starting-a-new-post">Starting a new post</h2>
<p>Lets start a new post about automating my posts in python.</p>
<div class="highlight"><pre><span></span><code>np <span class="s2">"automating my posts"</span> python
</code></pre></div>
<h2 id="this-is-my-workflow">This is my workflow</h2>
<p>Ad hoc scripts like this can be a bit of a hot mess, partly due to the just get
it done nature, but also due to the fact that I am just riffing off the top of
my head and utilizing docs as least as possible.</p>
<p>While writing the script I would run it after each section or so and print some
results to make sure they were looking good. If I ever needed access to a live
variable I would pop open ipython and run <code>%run new-post "my-new-post"</code> and
inspecting it.</p>
<h2 id="final-script">Final Script</h2>
<p><em><small><mark>final script</mark></small></em>
</p><div class="highlight"><pre><span></span><code><span class="ch">#!python</span>
<span class="c1"># new-post</span>

<span class="kn">import</span> <span class="nn">sys</span>
<span class="kn">import</span> <span class="nn">datetime</span>
<span class="kn">import</span> <span class="nn">pathlib</span>
<span class="kn">import</span> <span class="nn">subprocess</span>


<span class="n">title</span> <span class="o">=</span> <span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">titlecase</span><span class="p">()</span>
<span class="n">args</span> <span class="o">=</span> <span class="s2">""</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">sys</span><span class="o">.</span><span class="n">argv</span><span class="p">[</span><span class="mi">1</span><span class="p">:])</span>
<span class="n">tags</span> <span class="o">=</span> <span class="p">[]</span>

<span class="k">if</span> <span class="s2">"py"</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"python"</span><span class="p">)</span>

<span class="k">if</span> <span class="s2">"web"</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"webdev"</span><span class="p">)</span>

<span class="k">if</span> <span class="s2">"blog"</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"blog"</span><span class="p">)</span>

<span class="k">if</span> <span class="s2">"data"</span> <span class="ow">in</span> <span class="n">args</span><span class="p">:</span>
    <span class="n">tags</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s2">"data"</span><span class="p">)</span>

<span class="n">slug</span> <span class="o">=</span> <span class="n">title</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">" "</span><span class="p">,</span> <span class="s2">"-"</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s2">"_"</span><span class="p">,</span> <span class="s2">"-"</span><span class="p">)</span>
<span class="n">frontmatter</span> <span class="o">=</span> <span class="sa">f</span><span class="s2">"""---</span>
<span class="s2">templateKey: blog-post</span>
<span class="s2">tags: </span><span class="si">{</span><span class="n">tags</span><span class="si">}</span><span class="s2"></span>
<span class="s2">title: </span><span class="si">{</span><span class="n">title</span><span class="si">}</span><span class="s2"></span>
<span class="s2">date: </span><span class="si">{</span><span class="n">datetime</span><span class="o">.</span><span class="n">date</span><span class="o">.</span><span class="n">today</span><span class="p">()</span><span class="o">.</span><span class="n">strftime</span><span class="p">(</span><span class="s1">'%Y-%m-</span><span class="si">%d</span><span class="s1">T%H:%M:%S'</span><span class="p">)</span><span class="si">}</span><span class="s2"></span>
<span class="s2">status: draft</span>
<span class="s2">description: ''</span>
<span class="s2">cover: "/static/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s2">.png"</span>

<span class="s2">---</span>


<span class="s2">"""</span>


<span class="k">class</span> <span class="nc">PostExistsError</span><span class="p">(</span><span class="ne">FileExistsError</span><span class="p">):</span>
    <span class="k">pass</span>


<span class="n">directory</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="vm">__file__</span><span class="p">)</span><span class="o">.</span><span class="n">parent</span>
<span class="n">path</span> <span class="o">=</span> <span class="n">pathlib</span><span class="o">.</span><span class="n">Path</span><span class="p">(</span><span class="sa">f</span><span class="s2">"</span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s2">/src/pages/blog/</span><span class="si">{</span><span class="n">slug</span><span class="si">}</span><span class="s2">.md"</span><span class="p">)</span>

<span class="k">if</span> <span class="n">path</span><span class="o">.</span><span class="n">exists</span><span class="p">():</span>
    <span class="k">raise</span> <span class="n">PostExistsError</span><span class="p">(</span><span class="sa">f</span><span class="s2">"Post Already exists at </span><span class="si">{</span><span class="n">path</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>

<span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">path</span><span class="p">,</span> <span class="s2">"w+"</span><span class="p">)</span> <span class="k">as</span> <span class="n">f</span><span class="p">:</span>
    <span class="n">f</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="n">frontmatter</span><span class="p">)</span>

<span class="n">gadd</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">'cd </span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s1"> &amp;&amp; git add </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="si">}</span><span class="s1"> '</span><span class="p">,</span>
    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">gadd</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>

<span class="n">nvim</span> <span class="o">=</span> <span class="n">subprocess</span><span class="o">.</span><span class="n">Popen</span><span class="p">(</span>
    <span class="sa">f</span><span class="s1">'cd </span><span class="si">{</span><span class="n">directory</span><span class="si">}</span><span class="s1"> &amp;&amp; nvim +12 +star </span><span class="si">{</span><span class="nb">str</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="nb">str</span><span class="p">(</span><span class="n">directory</span><span class="p">)</span> <span class="o">+</span> <span class="s2">"/"</span><span class="p">,</span> <span class="s2">""</span><span class="p">)</span><span class="si">}</span><span class="s1"> '</span><span class="p">,</span>
    <span class="n">shell</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span>
<span class="p">)</span>
<span class="n">nvim</span><span class="o">.</span><span class="n">wait</span><span class="p">()</span>
</code></pre></div>
<div class="onelinelink-wrapper">
<a class="onelinelink" href="https://waylonwalker.com/quickly-edit-posts/">
<amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/quickly-edit-posts-og_250x140.png" width="500"></amp-img>
<p><strong>
 Quickly Edit Posts
</strong></p>
</a>
</div>
<blockquote>
<p>check out the next article in this series where I setup a bash function to quickly edit these posts</p>
</blockquote>
<div class="prevnext">

<a class="prev" href="/autoreload-ipython">
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5 8.25L9.75 12L13.5 15.75" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"> </path>
</svg>
<div class="prevnext-text">
<p class="prevnext-subtitle">prev</p>
<p class="prevnext-title">Autoreload in Ipython</p>
</div>
</a>
<a class="next" href="/audio-for-blog">
<div class="prevnext-text">
<p class="prevnext-subtitle">next</p>
<p class="prevnext-title">Adding Audio to my blog posts</p>
</div>
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M10.5 15.75L14.25 12L10.5 8.25" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
</svg>
</a>
</div>
</div>
<hr/>
<div id="show">
</div>
</article>
<h2>Socials</h2>
<ul class="social">
<li>
<a href="https://twitter.com/_WaylonWalker">twitter</a>
</li>
<li>
<a href="https://www.linkedin.com/in/waylonwalker/">LinkedIn</a>
</li>
<li>
<a href="https://github.com/WaylonWalker">GitHub</a>
</li>
<li>
<a href="https://dev.to/waylonwalker">Dev.to</a>
</li>
<li>
<a href="https://www.twitch.tv/waylonwalker">twitch</a>
</li>
</ul>
</body>
</html>