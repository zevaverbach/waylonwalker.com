<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <link href="/8bitcc.ico" rel="icon" type="image/png"/>
  <link href="https://waylonwalker.com/reusable-bash/amp/" rel="amphtml"/>
  <meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
  <!-- <link rel='stylesheet' href='/fonts.css' />
  <link rel='stylesheet' href='/archive-styles.css' />
  <link rel='stylesheet' href='/article.css' /> -->
  <link href="/main.min.css" rel="stylesheet"/>
  <link as="style" href="/one-dark.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <link as="style" href="/furo-purge.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <!-- <link rel="preload" href="/scroll.css" as="style" onload="this.onload=null;this.rel='stylesheet'"> -->
  <noscript>
   <!-- <link rel='stylesheet' href='/scroll.css' /> -->
   <link href="/one-dark.min.css" rel="stylesheet"/>
   <link href="/furo-purge.min.css" rel="stylesheet"/>
  </noscript>
  <link href="8bitcc_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
  <link href="8bitcc_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="8bitcc_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
  <link href="8bitcc_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
  <link href="8bitcc_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
  <link href="8bitcc_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
  <link href="8bitcc_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
  <link href="8bitcc_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
  <title>
   Creating Reusable Bash Scripts
  </title>
  <meta content="article" name="og:type" property="og:type"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="#322D39" name="theme-color"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="waylon@waylonwalaker.com" name="og:author_email" property="og:author_email"/>
  <meta content="website" name="og:type" property="og:type"/>
  <meta content="Bash is a language that is quite useful for automation no matter what language I have three techniques that help me write more composable bash scripts. Function" name="description" property="description"/>
  <meta content="Bash is a language that is quite useful for automation no matter what language I have three techniques that help me write more composable bash scripts. Function" name="og:description" property="og:description"/>
  <meta content="Bash is a language that is quite useful for automation no matter what language I have three techniques that help me write more composable bash scripts. Function" name="twitter:description" property="twitter:description"/>
  <meta content="Creating Reusable Bash Scripts | Waylon Walker" name="og:title" property="og:title"/>
  <meta content="Creating Reusable Bash Scripts | Waylon Walker" name="twitter:title" property="twitter:title"/>
  <meta content="https://images.waylonwalker.com/reusable-bash-og.png" name="og:image" property="og:image"/>
  <meta content="https://images.waylonwalker.com/reusable-bash-og.png" name="twitter:image" property="twitter:image"/>
  <meta content="1600" name="og:image:width" property="og:image:width"/>
  <meta content="900" name="og:image:width" property="og:image:width"/>
  <meta content="summary_large_image" name="twitter:card" property="twitter:card"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="@_waylonwalker" name="twitter:creator" property="twitter:creator"/>
  <meta content="Creating Reusable Bash Scripts" name="title" property="title"/>
  <meta content="markata 0.1.0" name="generator" property="generator"/>
  <link href="https://waylonwalker.com/reusable-bash/" rel="canonical"/>
  <meta content="https://waylonwalker.com/reusable-bash/" name="og:url" property="og:url"/>
  <link href="/manifest.json" rel="manifest"/>
  <meta content="https://images.waylonwalker.com/reusable-bash-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
  <meta content="https://images.waylonwalker.com/reusable-bash-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
 </head>
 <body>
  <nav>
   <ul>
    <li>
     <a href="/">
      Home
     </a>
    </li>
    <li>
     <a href="/archive/">
      Archive
     </a>
    </li>
    <li>
     <a aria-label="RSS" href="/rss.xml">
      <svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
       <path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
       </path>
      </svg>
     </a>
    </li>
   </ul>
  </nav>
  <article class="blog-post h-entry">
   <!-- <div id='cover-wrapper'>
      <img src='/reusable-bash.webp' alt='cover image for article' />
    </div> -->
   <div id="title-wrapper">
    <a class="u-url" href="https://waylonwalker.com/reusable-bash/">
     <h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">
      Creating Reusable Bash Scripts
     </h1>
    </a>
    <p>
     <time class="dt-published post-date" datetime="2020-08-13" style="text-align:right;z-index:2">
      2020-08-13
     </time>
    </p>
    <div class="h-card p-author" rel="author">
     <div class="content">
      <a class="p-name u-url" href="https://waylonwalker.com/">
       <p>
        <span class="p-given-name">
         Waylon
        </span>
        <span class="p-family-name">
         Walker
        </span>
       </p>
      </a>
      <p class="p-note">
       Learning in Public
       <a href="https://twitter.com/_WaylonWalker">
        @_WaylonWalker
       </a>
      </p>
     </div>
    </div>
    <!-- edit -->
    <p>
     <a alt="edit post url" href="https://github.com/WaylonWalker/waylonwalker.com/edit/main/pages/blog/reusable-bash.md" title="edit this post">
      edit
      <span aria-label="" role="img">
       ✏️
      </span>
     </a>
    </p>
   </div>
   <!-- <h2 class='toc'>toc</h2> -->
   <!-- <div class="toc">
<ul>
<li><a href="#its-still-early">It's still early</a></li>
<li><a href="#on-to-the-devtools">On to the devtools</a></li>
<li><a href="#why-does-textual-need-its-own-devtools">Why does textual need its own devtools</a></li>
<li><a href="#getting-the-css-branch">getting the css branch</a></li>
<li><a href="#install-in-a-virtual-environment">install in a virtual environment</a></li>
<li><a href="#now-that-we-have-textual-installed">Now that we have textual installed</a></li>
</ul>
</div>
 -->
   <div id="post-body">
    <p>
     Bash is a language that is quite useful for automation no matter what language
you write in. Bash can do so many powerful system-level tasks. Even if you are
on windows these days you are likely to come across bash inside a cloud VM,
Continuous Integration, or even inside of docker.
    </p>
    <p>
     I have three techniques that help me write more composable bash scripts.
    </p>
    <ol>
     <li>
      <a href="#functions">
       functions
      </a>
     </li>
     <li>
      <a href="#arguments">
       Arguments
      </a>
     </li>
     <li>
      <a href="#positional-arguments">
       positional arguments
      </a>
     </li>
     <li>
      <a href="#all-arguments">
       All Arguments
      </a>
     </li>
     <li>
      <a href="#error-handling">
       Error Handling
      </a>
     </li>
     <li>
      <a href="#main-script">
       main script
      </a>
     </li>
    </ol>
    <hr/>
    <h2 id="functions">
     Functions
     <a alt="id" class="heading-permalink" href="#functions" title="link to #functions">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      Break scripts down into reusable components
     </em>
    </p>
    <p>
     Functions in bash are quite simple. They are something that I wish I would have
started using long ago. They make your code much more reusable. I often use
them in my aliases as well since they can simplify the process and allow more
flexibility.
    </p>
    <p>
     <em>
      <small>
       <mark>
        syntax
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="c1"># hello_world</span>
hello_world <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"hello world"</span>
<span class="o">}</span>
</code></pre>
    </div>
    <p>
     Source the file to load the function and run it from the terminal.
    </p>
    <p>
     <em>
      <small>
       <mark>
        run it
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="nb">source</span> hello_world
hello_world
</code></pre>
    </div>
    <p>
     <em>
      <small>
       <mark>
        outputs
       </mark>
      </small>
     </em>
    </p>
    <h2 id="hello-world">
     <div class="highlight">
      <pre><span></span><code>hello world
</code></pre>
     </div>
     <a alt="id" class="heading-permalink" href="#hello-world" title="link to #hello-world">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <h2 id="arguments">
     Arguments
     <a alt="id" class="heading-permalink" href="#arguments" title="link to #arguments">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      Make functions a little more flexible
     </em>
    </p>
    <p>
     Arguments and options are quite a bit more complex in bash. For now, we will
focus on the basics which are not all that bad.
    </p>
    <h3 id="positional-arguments">
     positional arguments
     <a alt="id" class="heading-permalink" href="#positional-arguments" title="link to #positional-arguments">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h3>
    <p>
     <em>
      easiest and most common to use
     </em>
    </p>
    <p>
     Positional arguments can be pulled out quite easily using
     <code>
      $1
     </code>
     for the first
one,
     <code>
      $2
     </code>
     for the second, and so on.
    </p>
    <p>
     <strong>
      note
     </strong>
     <code>
      $0
     </code>
     is the command that was called. You will see this often used to
find the command called to open up your current shell.
    </p>
    <p>
     <em>
      <small>
       <mark>
        syntax
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="c1"># hello</span>
hello <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"hello </span><span class="nv">$1</span><span class="s2">"</span>
</code></pre>
    </div>
    <p>
     <em>
      <small>
       <mark>
        run it
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="nb">source</span> hello
hello Waylon
</code></pre>
    </div>
    <p>
     Now we have a function that accepts positional arguments and we can call it by
passing things into it.
    </p>
    <p>
     <em>
      <small>
       <mark>
        outputs
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code>hello Waylon
</code></pre>
    </div>
    <p>
     More than one argument would be ignored since we are only looking at
     <code>
      $1
     </code>
     .
    </p>
    <p>
     <em>
      <small>
       <mark>
        run it
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="nb">source</span> hello
hello Waylon Walker
</code></pre>
    </div>
    <p>
     <em>
      <small>
       <mark>
        outputs
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code>hello Waylon
</code></pre>
    </div>
    <p>
     Just the same as before since we do not use the second argument.
    </p>
    <h3 id="all-arguments">
     All Arguments
     <a alt="id" class="heading-permalink" href="#all-arguments" title="link to #all-arguments">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h3>
    <p>
     Bash has another special variable
     <code>
      $@
     </code>
     that stores
     <strong>
      all arguments
     </strong>
     in one.
    </p>
    <p>
     <em>
      <small>
       <mark>
        syntax
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="ch">#!/bin/sh</span>
<span class="c1"># hello</span>
hello <span class="o">()</span> <span class="o">{</span>
    <span class="nb">echo</span> <span class="s2">"hello </span><span class="nv">$@</span><span class="s2">"</span>
<span class="o">}</span>
</code></pre>
    </div>
    <p>
     Just the same as before.
    </p>
    <p>
     <em>
      <small>
       <mark>
        run it
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="nb">source</span> hello
hello Waylon Walker
</code></pre>
    </div>
    <p>
     Now the function will output all arguments that are passed into it since we are using the
     <code>
      $@
     </code>
     variable.
    </p>
    <p>
     <em>
      <small>
       <mark>
        outputs
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code>hello Waylon Walker
</code></pre>
    </div>
    <hr/>
    <h2 id="error-handling">
     Error Handling
     <a alt="id" class="heading-permalink" href="#error-handling" title="link to #error-handling">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      Super powers in a single line
     </em>
    </p>
    <p>
     The easiest and most common way to handle an error in bash is through the use
of the logical operators
     <code>
      &amp;&amp;
     </code>
     (and) and
     <code>
      ||
     </code>
     (or).
    </p>
    <p>
     Here I have a concrete example from earlier today. I was creating a bash script
to run a python script from cron. The bash script is there to make sure that we
have the python environment, activate it, and run. If it doesn't have it, it
should create it.
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="c1"># creates the conda environment</span>
create_env<span class="o">()</span> <span class="o">{</span>
    conda create -n <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="nv">python</span><span class="o">=</span><span class="m">3</span>.8
    conda activate <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
    pip install -r requirements.txt
<span class="o">}</span>


<span class="c1"># checks if the conda environment exists</span>
env_exists<span class="o">()</span> <span class="o">{</span>
conda info --envs <span class="p">|</span> awk <span class="s1">'{print $1}'</span> <span class="p">|</span> tail -n +3 <span class="p">|</span> grep -w <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> &gt; /dev/null
<span class="o">}</span>


<span class="c1"># creates the conda environment if it doesn't exist</span>
create_if <span class="o">()</span> <span class="o">{</span>
env_exists <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">&amp;&amp;</span> <span class="nb">echo</span> <span class="s2">"environment exists"</span> <span class="o">||</span> create_env <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span>
<span class="o">}</span>

create_if my_env
</code></pre>
    </div>
    <p>
     If we look at the
     <code>
      create_if
     </code>
     function, it will check if the environment exists
if there is a passing status code
     <code>
      0
     </code>
     , then it will run
     <code>
      echo "environment
exists"
     </code>
     otherwise it will run
     <code>
      create_env $1
     </code>
     .
    </p>
    <p>
     <strong>
      note
     </strong>
     Inside of
     <code>
      env_exists
     </code>
     grep will look for whole words if there is a
match it will give a status code 0 if it finds a match and not 0 if there is no
match.
    </p>
    <hr/>
    <h2 id="main-script">
     main script
     <a alt="id" class="heading-permalink" href="#main-script" title="link to #main-script">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     _
     <code>
      if __name__ == " __main__"
     </code>
     _
    </p>
    <p>
     The last thing I want to discuss is making a bash script both runnable and
sourceable. This makes it so that you can
     <code>
      source filename.sh
     </code>
     and run each
function individually, or
     <code>
      bash filename.sh
     </code>
     to run the script. This is a
similar concept to
     <code>
      if __name__ == " __main__"
     </code>
     from python.
    </p>
    <p>
     I did try this from bash and zsh with success. The following is an example that
would pass all arguments into a main function.
    </p>
    <p>
     <em>
      <small>
       <mark>
        syntax
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="k">if</span> <span class="o">[[</span><span class="s2">"</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="si">${</span><span class="nv">0</span><span class="si">}</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
    main <span class="s2">"</span><span class="nv">$@</span><span class="s2">"</span>
<span class="k">fi</span>
</code></pre>
    </div>
    <p>
     Extending the example above that created a python example if necessary we can
create the env if necessary, activate the environment, and run the script.
    </p>
    <p>
     <em>
      <small>
       <mark>
        syntax
       </mark>
      </small>
     </em>
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="k">if</span> <span class="o">[[</span><span class="s2">"</span><span class="si">${</span><span class="nv">BASH_SOURCE</span><span class="p">[0]</span><span class="si">}</span><span class="s2">"</span> <span class="o">==</span> <span class="s2">"</span><span class="si">${</span><span class="nv">0</span><span class="si">}</span><span class="s2">"</span> <span class="o">]]</span><span class="p">;</span> <span class="k">then</span>
create_if my_env
conda activate my_env
python script.py
<span class="k">fi</span>
</code></pre>
    </div>
    <p>
     Using this syntax to run our "main" functions will allow us to both runs the
script or source the script to utilize the functions that we created.
    </p>
    <div class="prevnext">
     <style type="text/css">
      :root {
      --prevnext-color-text: #eefbfe;
      --prevnext-color-angle: #ff66c4;
      --prevnext-subtitle-brightness: 3;
    }
    [data-theme="light"] {
      --prevnext-color-text: #1f2022;
      --prevnext-color-angle: #ffeb00;
      --prevnext-subtitle-brightness: 3;
    }
    [data-theme="dark"] {
      --prevnext-color-text: #eefbfe;
      --prevnext-color-angle: #ff66c4;
      --prevnext-subtitle-brightness: 3;
    }
    .prevnext {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: flex-start;
    }
    .prevnext a {
      display: flex;
      align-items: center;
      width: 100%;
      text-decoration: none;
    }
    a.next {
      justify-content: flex-end;
    }
    .prevnext a:hover {
      background: #00000006;
    }
    .prevnext-subtitle {
      color: var(--prevnext-color-text);
      filter: brightness(var(--prevnext-subtitle-brightness));
      font-size: .8rem;
    }
    .prevnext-title {
      color: var(--prevnext-color-text);
      font-size: 1rem;
    }
    .prevnext-text {
      max-width: 30vw;
    }
     </style>
     <a class="prev" href="/save-vim-macro">
      <svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
       <path d="M13.5 8.25L9.75 12L13.5 15.75" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
       </path>
      </svg>
      <div class="prevnext-text">
       <p class="prevnext-subtitle">
        prev
       </p>
       <p class="prevnext-title">
        Save Vim Macro
       </p>
      </div>
     </a>
     <a class="next" href="/resume-tips">
      <div class="prevnext-text">
       <p class="prevnext-subtitle">
        next
       </p>
       <p class="prevnext-title">
        Resume Tips
       </p>
      </div>
      <svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
       <path d="M10.5 15.75L14.25 12L10.5 8.25" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
       </path>
      </svg>
     </a>
    </div>
   </div>
   <hr/>
   <div id="show">
   </div>
  </article>
  <footer>
   <ul class="social">
    <li>
     <a href="https://twitter.com/_WaylonWalker">
      twitter
     </a>
    </li>
    <li>
     <a href="https://www.linkedin.com/in/waylonwalker/">
      LinkedIn
     </a>
    </li>
    <li>
     <a href="https://github.com/WaylonWalker">
      GitHub
     </a>
    </li>
    <li>
     <a href="https://dev.to/waylonwalker">
      Dev.to
     </a>
    </li>
    <li>
     <a href="https://www.twitch.tv/waylonwalker">
      twitch
     </a>
    </li>
   </ul>
   <p>
    © 2020 - 2022
   </p>
  </footer>
 </body>
</html>