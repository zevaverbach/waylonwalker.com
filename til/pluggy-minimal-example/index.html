<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width" name="viewport"/>
  <link href="/8bitcc.ico" rel="icon" type="image/png"/>
  <link href="https://waylonwalker.com/til/pluggy-minimal-example/amp/" rel="amphtml"/>
  <meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
  <!-- <link rel='stylesheet' href='/fonts.css' />
  <link rel='stylesheet' href='/archive-styles.css' />
  <link rel='stylesheet' href='/article.css' /> -->
  <link href="/main.min.css" rel="stylesheet"/>
  <link as="style" href="/one-dark.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <link as="style" href="/furo-purge.min.css" onload="this.onload=null;this.rel='stylesheet'" rel="preload"/>
  <!-- <link rel="preload" href="/scroll.css" as="style" onload="this.onload=null;this.rel='stylesheet'"> -->
  <noscript>
   <!-- <link rel='stylesheet' href='/scroll.css' /> -->
   <link href="/one-dark.min.css" rel="stylesheet"/>
   <link href="/furo-purge.min.css" rel="stylesheet"/>
  </noscript>
  <link href="8bitcc_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
  <link href="8bitcc_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
  <link href="8bitcc_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
  <link href="8bitcc_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
  <link href="8bitcc_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
  <link href="8bitcc_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
  <link href="8bitcc_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
  <link href="8bitcc_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
  <title>
   A Minimal Pluggy Example
  </title>
  <meta content="article" name="og:type" property="og:type"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="#322D39" name="theme-color"/>
  <meta content="Waylon Walker" name="og:author" property="og:author"/>
  <meta content="waylon@waylonwalaker.com" name="og:author_email" property="og:author_email"/>
  <meta content="website" name="og:type" property="og:type"/>
  <meta content="Pluggy makes it so easy to allow users to modify the behavior of a framework I As long as the framework document the hooks that are available and what it Instal" name="description" property="description"/>
  <meta content="Pluggy makes it so easy to allow users to modify the behavior of a framework I As long as the framework document the hooks that are available and what it Instal" name="og:description" property="og:description"/>
  <meta content="Pluggy makes it so easy to allow users to modify the behavior of a framework I As long as the framework document the hooks that are available and what it Instal" name="twitter:description" property="twitter:description"/>
  <meta content="A Minimal Pluggy Example | Waylon Walker" name="og:title" property="og:title"/>
  <meta content="A Minimal Pluggy Example | Waylon Walker" name="twitter:title" property="twitter:title"/>
  <meta content="https://images.waylonwalker.com/til/pluggy-minimal-example-og.png" name="og:image" property="og:image"/>
  <meta content="https://images.waylonwalker.com/til/pluggy-minimal-example-og.png" name="twitter:image" property="twitter:image"/>
  <meta content="1600" name="og:image:width" property="og:image:width"/>
  <meta content="900" name="og:image:width" property="og:image:width"/>
  <meta content="summary_large_image" name="twitter:card" property="twitter:card"/>
  <meta content="Waylon Walker" name="og:site_name" property="og:site_name"/>
  <meta content="@_waylonwalker" name="twitter:creator" property="twitter:creator"/>
  <meta content="A Minimal Pluggy Example" name="title" property="title"/>
  <meta content="markata 0.1.0" name="generator" property="generator"/>
  <link href="https://waylonwalker.com/til/pluggy-minimal-example/" rel="canonical"/>
  <meta content="https://waylonwalker.com/til/pluggy-minimal-example/" name="og:url" property="og:url"/>
  <link href="/manifest.json" rel="manifest"/>
  <meta content="https://images.waylonwalker.com/til/pluggy-minimal-example-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
  <meta content="https://images.waylonwalker.com/til/pluggy-minimal-example-og_250x140.png" name="og:sm_image" property="og:sm_image"/>
 </head>
 <body>
  <nav>
   <ul>
    <li>
     <a href="/">
      Home
     </a>
    </li>
    <li>
     <a href="/archive/">
      Archive
     </a>
    </li>
    <li>
     <a aria-label="RSS" href="/rss.xml">
      <svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
       <path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
       </path>
      </svg>
     </a>
    </li>
   </ul>
  </nav>
  <article class="blog-post h-entry">
   <!-- <div id='cover-wrapper'>
      <img src='/til/pluggy-minimal-example.webp' alt='cover image for article' />
    </div> -->
   <div id="title-wrapper">
    <a class="u-url" href="https://waylonwalker.com/til/pluggy-minimal-example/">
     <h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">
      A Minimal Pluggy Example
     </h1>
    </a>
    <p>
     <time class="dt-published post-date" datetime="2022-01-01" style="text-align:right;z-index:2">
      2022-01-01
     </time>
    </p>
    <div class="h-card p-author" rel="author">
     <div class="content">
      <a class="p-name u-url" href="https://waylonwalker.com/">
       <p>
        <span class="p-given-name">
         Waylon
        </span>
        <span class="p-family-name">
         Walker
        </span>
       </p>
      </a>
      <p class="p-note">
       Learning in Public
       <a href="https://twitter.com/_WaylonWalker">
        @_WaylonWalker
       </a>
      </p>
     </div>
    </div>
    <!-- edit -->
    <p>
     <a alt="edit post url" href="https://github.com/WaylonWalker/waylonwalker.com/edit/main/pages/blog/til/pluggy-minimal-example.md" title="edit this post">
      edit
      <span aria-label="" role="img">
       ✏️
      </span>
     </a>
    </p>
   </div>
   <!-- <h2 class='toc'>toc</h2> -->
   <!-- <div class="toc">
<ul>
<li><a href="#its-still-early">It's still early</a></li>
<li><a href="#on-to-the-devtools">On to the devtools</a></li>
<li><a href="#why-does-textual-need-its-own-devtools">Why does textual need its own devtools</a></li>
<li><a href="#getting-the-css-branch">getting the css branch</a></li>
<li><a href="#install-in-a-virtual-environment">install in a virtual environment</a></li>
<li><a href="#now-that-we-have-textual-installed">Now that we have textual installed</a></li>
</ul>
</div>
 -->
   <div id="post-body">
    <p>
     Pluggy makes it so easy to allow users to modify the behavior of a framework
without thier specific feature needing to be implemented in the framework
itself.
    </p>
    <p>
     I've really been loving the workflow of frameworks built with pluggy.  The first
one that many python devs have experience with is pytest.  I've never created a
pytest plugin, and honestly at the time I looked into how they were made was a
long time ago and it went over my head.  I use a data pipelining framework
called kedro, and have build many plugins for it.
    </p>
    <h2 id="making-a-plugin">
     Making a plugin
     <a alt="id" class="heading-permalink" href="#making-a-plugin" title="link to #making-a-plugin">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      super easy to do
     </em>
    </p>
    <p>
     As long as the framework document the hooks that are available and what it
passes to them it's so easy to make a plugin.  Its just importing the
     <code>
      hook_impl
     </code>
     , making a class with a function that represents one of the hooks,
and decorating it.
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="kn">from</span> <span class="nn">framework</span> <span class="kn">import</span> <span class="n">hook_impl</span>

<span class="k">class</span> <span class="nc">LowerHook</span><span class="p">:</span>
    <span class="nd">@hook_impl</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="n">pluggy_example</span><span class="p">):</span>
        <span class="n">pluggy_example</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">pluggy_example</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">lower</span><span class="p">()</span>
</code></pre>
    </div>
    <h2 id="installing-pluggy">
     installing pluggy
     <a alt="id" class="heading-permalink" href="#installing-pluggy" title="link to #installing-pluggy">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     Installing pluggy is just like most python applications, install python, make
your virtual environment, and pip install it.
    </p>
    <div class="highlight">
     <pre><span></span><code>pip install pluggy
</code></pre>
    </div>
    <h2 id="making-a-plugin-driven-framework">
     Making a plugin driven framework
     <a alt="id" class="heading-permalink" href="#making-a-plugin-driven-framework" title="link to #making-a-plugin-driven-framework">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      much less easy
     </em>
    </p>
    <p>
     At the time I started playing with pluggy, their docs were less
complete, or I was just plain blind, but this was a huge part of the
docs that were missing for me that now actually appear to be there.  But
to get some more examples out there, here is my version.
    </p>
    <div class="highlight">
     <pre><span></span><code><span class="kn">import</span> <span class="nn">pluggy</span>

<span class="c1"># These don't need to match</span>
<span class="n">HOOK_NAMESPACE</span> <span class="o">=</span> <span class="s2">"pluggy_example"</span>
<span class="n">PROJECT_NAME</span> <span class="o">=</span> <span class="s2">"pluggy_example"</span>

<span class="n">hook_spec</span> <span class="o">=</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookspecMarker</span><span class="p">(</span><span class="n">HOOK_NAMESPACE</span><span class="p">)</span>
<span class="n">hook_impl</span> <span class="o">=</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">HookimplMarker</span><span class="p">(</span><span class="n">HOOK_NAMESPACE</span><span class="p">)</span>


<span class="k">class</span> <span class="nc">PluggyExampleSpecs</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    This is where we spec out our frameworks hooks, I like to refer to them as</span>
<span class="sd">    the lifecycle.  Each of these functions is a hook that we are exposing to</span>
<span class="sd">    our users, with the kwargs that we expect to pass them.</span>
<span class="sd">    """</span>
    <span class="nd">@hook_spec</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluggy_example</span><span class="p">:</span> <span class="n">PluggyExample</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        The first hook that runs.</span>
<span class="sd">        """</span>
        <span class="k">pass</span>

    <span class="nd">@hook_spec</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">pluggy_example</span><span class="p">:</span> <span class="n">PluggyExample</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        The last hook that runs.</span>
<span class="sd">        """</span>
        <span class="k">pass</span>


<span class="k">class</span> <span class="nc">PluggyExample</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    This may not need to be a class, but I wanted a container where all the</span>
<span class="sd">    hooks had access to the message.  This made sense to me to do as a class.</span>
<span class="sd">    """</span>

    <span class="k">def</span> <span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">message</span><span class="o">=</span><span class="s2">""</span><span class="p">,</span> <span class="n">hooks</span><span class="o">=</span><span class="kc">None</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="sd">"""</span>
<span class="sd">        Setup the plugin manager and register all the hooks.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pm</span> <span class="o">=</span> <span class="n">pluggy</span><span class="o">.</span><span class="n">PluginManager</span><span class="p">(</span><span class="n">PROJECT_NAME</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pm</span><span class="o">.</span><span class="n">add_hookspecs</span><span class="p">(</span><span class="n">PluggyExampleSpecs</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">message</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">hooks</span> <span class="o">=</span> <span class="n">hooks</span>
        <span class="k">if</span> <span class="n">hooks</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_register_hooks</span><span class="p">()</span>

    <span class="k">def</span> <span class="nf">_register_hooks</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="kc">None</span><span class="p">:</span>
        <span class="k">for</span> <span class="n">hook</span> <span class="ow">in</span> <span class="bp">self</span><span class="o">.</span><span class="n">hooks</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">_pm</span><span class="o">.</span><span class="n">register</span><span class="p">(</span><span class="n">hook</span><span class="p">)</span>

    <span class="k">def</span> <span class="nf">run</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
        <span class="sd">"""</span>
<span class="sd">        Run the hooks in the documented order, and pass in any kwargs the hook</span>
<span class="sd">        needs access to.  Here I am storing the message within this same class.</span>
<span class="sd">        """</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pm</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">start</span><span class="p">(</span><span class="n">pluggy_example</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">_pm</span><span class="o">.</span><span class="n">hook</span><span class="o">.</span><span class="n">stop</span><span class="p">(</span><span class="n">pluggy_example</span><span class="o">=</span><span class="bp">self</span><span class="p">)</span>
        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">message</span>


<span class="k">class</span> <span class="nc">DefaultHook</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    These are some hooks that run by default, maybe these are created by the</span>
<span class="sd">    framework author.</span>
<span class="sd">    """</span>
    <span class="nd">@hook_impl</span>
    <span class="k">def</span> <span class="nf">start</span><span class="p">(</span><span class="n">pluggy_example</span><span class="p">):</span>
        <span class="n">pluggy_example</span><span class="o">.</span><span class="n">message</span> <span class="o">=</span> <span class="n">pluggy_example</span><span class="o">.</span><span class="n">message</span><span class="o">.</span><span class="n">upper</span><span class="p">()</span>

    <span class="nd">@hook_impl</span>
    <span class="k">def</span> <span class="nf">stop</span><span class="p">(</span><span class="n">pluggy_example</span><span class="p">):</span>
        <span class="nb">print</span><span class="p">(</span><span class="n">pluggy_example</span><span class="o">.</span><span class="n">message</span><span class="p">)</span>


<span class="k">if</span> <span class="vm">__name__</span> <span class="o">==</span> <span class="s2">"__main__"</span><span class="p">:</span>
    <span class="sd">"""</span>
<span class="sd">    The user of this framework can apply the hook in their own code without</span>
<span class="sd">    changing the behavior of the framework, but the library has</span>
<span class="sd">    implemented it's own default hooks.</span>
<span class="sd">    """</span>
    <span class="n">pe</span> <span class="o">=</span> <span class="n">PluggyExample</span><span class="p">(</span>
        <span class="n">message</span><span class="o">=</span><span class="s2">"hello world"</span><span class="p">,</span>
        <span class="n">hooks</span><span class="o">=</span><span class="p">[</span>
            <span class="n">DefaultHook</span><span class="p">,</span>
        <span class="p">],</span>
    <span class="p">)</span>
    <span class="n">pe</span><span class="o">.</span><span class="n">run</span><span class="p">()</span>
</code></pre>
    </div>
    <h2 id="modifying-behavior">
     Modifying behavior
     <a alt="id" class="heading-permalink" href="#modifying-behavior" title="link to #modifying-behavior">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     <em>
      as a user of PluggyExample
     </em>
    </p>
    <p>
     Now Lets pretent the user of this library likes everything about it,
except, they don't like all the shouting.  They can either search for a
plugin on Google, github, or pypi and find one, or make it themself. the
magic here is that they do not need to have the package maintainer patch
the core library itself.
    </p>
    <div class="highlight">
     <pre><span></span><code>class LowerHook:
    """
    This is a new hook that a plugin author has created to modify the behavior
    of the framework to lowercase the message.
    """
    @hook_impl
    def start(pluggy_example):
        pluggy_example.message = pluggy_example.message.lower()

from pluggy_example import PluggyExample
pe = PluggyExample(
    message="hello world",
    hooks=[
        DefaultHook,
        LowerHook
    ],
)
pe.run()
</code></pre>
    </div>
    <h2 id="running-pluggy-example">
     Running Pluggy Example
     <a alt="id" class="heading-permalink" href="#running-pluggy-example" title="link to #running-pluggy-example">
      <span class="visually-hidden">
      </span>
      <svg aria-hidden="true" fill="currentColor" focusable="false" height="1em" viewbox="0 0 24 24" width="1em" xmlns="http://www.w3.org/2000/svg">
       <path d="M9.199 13.599a5.99 5.99 0 0 0 3.949 2.345 5.987 5.987 0 0 0 5.105-1.702l2.995-2.994a5.992 5.992 0 0 0 1.695-4.285 5.976 5.976 0 0 0-1.831-4.211 5.99 5.99 0 0 0-6.431-1.242 6.003 6.003 0 0 0-1.905 1.24l-1.731 1.721a.999.999 0 1 0 1.41 1.418l1.709-1.699a3.985 3.985 0 0 1 2.761-1.123 3.975 3.975 0 0 1 2.799 1.122 3.997 3.997 0 0 1 .111 5.644l-3.005 3.006a3.982 3.982 0 0 1-3.395 1.126 3.987 3.987 0 0 1-2.632-1.563A1 1 0 0 0 9.201 13.6zm5.602-3.198a5.99 5.99 0 0 0-3.949-2.345 5.987 5.987 0 0 0-5.105 1.702l-2.995 2.994a5.992 5.992 0 0 0-1.695 4.285 5.976 5.976 0 0 0 1.831 4.211 5.99 5.99 0 0 0 6.431 1.242 6.003 6.003 0 0 0 1.905-1.24l1.723-1.723a.999.999 0 1 0-1.414-1.414L9.836 19.81a3.985 3.985 0 0 1-2.761 1.123 3.975 3.975 0 0 1-2.799-1.122 3.997 3.997 0 0 1-.111-5.644l3.005-3.006a3.982 3.982 0 0 1 3.395-1.126 3.987 3.987 0 0 1 2.632 1.563 1 1 0 0 0 1.602-1.198z">
       </path>
      </svg>
     </a>
    </h2>
    <p>
     Here is a short clip of me running the pluggy example in it's default
state, then adding the LowerHook, and running a second time.
    </p>
    <p>
     <video autoplay="" controls="" loop="true" muted="" playsinline="" width="100%">
      <source src="https://images.waylonwalker.com/til-pluggy-example.webm" type="video/webm"/>
      <source src="https://images.waylonwalker.com/til-pluggy-example.mp4" type="video/mp4"/>
      Sorry, your browser doesn't support embedded videos.
     </video>
    </p>
    <div class="speed-control">
     <button onclick="change_speed(.25)">
      speed up
     </button>
     <button onclick="change_speed(-.25)">
      slow down
     </button>
    </div>
    <div class="prevnext">
     <style type="text/css">
      :root {
      --prevnext-color-text: #eefbfe;
      --prevnext-color-angle: #ff66c4;
      --prevnext-subtitle-brightness: 3;
    }
    [data-theme="light"] {
      --prevnext-color-text: #1f2022;
      --prevnext-color-angle: #ffeb00;
      --prevnext-subtitle-brightness: 3;
    }
    [data-theme="dark"] {
      --prevnext-color-text: #eefbfe;
      --prevnext-color-angle: #ff66c4;
      --prevnext-subtitle-brightness: 3;
    }
    .prevnext {
      display: flex;
      flex-direction: row;
      justify-content: space-around;
      align-items: flex-start;
    }
    .prevnext a {
      display: flex;
      align-items: center;
      width: 100%;
      text-decoration: none;
    }
    a.next {
      justify-content: flex-end;
    }
    .prevnext a:hover {
      background: #00000006;
    }
    .prevnext-subtitle {
      color: var(--prevnext-color-text);
      filter: brightness(var(--prevnext-subtitle-brightness));
      font-size: .8rem;
    }
    .prevnext-title {
      color: var(--prevnext-color-text);
      font-size: 1rem;
    }
    .prevnext-text {
      max-width: 30vw;
    }
     </style>
     <a class="prev" href="/til/popen-stderr">
      <svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
       <path d="M13.5 8.25L9.75 12L13.5 15.75" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
       </path>
      </svg>
      <div class="prevnext-text">
       <p class="prevnext-subtitle">
        prev
       </p>
       <p class="prevnext-title">
        Read stderr from python subprocess.Popen
       </p>
      </div>
     </a>
     <a class="next" href="/til/pipx-w">
      <div class="prevnext-text">
       <p class="prevnext-subtitle">
        next
       </p>
       <p class="prevnext-title">
        Glances webui with pipx
       </p>
      </div>
      <svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
       <path d="M10.5 15.75L14.25 12L10.5 8.25" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5">
       </path>
      </svg>
     </a>
    </div>
   </div>
   <hr/>
   <div id="show">
   </div>
  </article>
  <footer>
   <ul class="social">
    <li>
     <a href="https://twitter.com/_WaylonWalker">
      twitter
     </a>
    </li>
    <li>
     <a href="https://www.linkedin.com/in/waylonwalker/">
      LinkedIn
     </a>
    </li>
    <li>
     <a href="https://github.com/WaylonWalker">
      GitHub
     </a>
    </li>
    <li>
     <a href="https://dev.to/waylonwalker">
      Dev.to
     </a>
    </li>
    <li>
     <a href="https://www.twitch.tv/waylonwalker">
      twitch
     </a>
    </li>
   </ul>
   <p>
    © 2022 - 2022
   </p>
  </footer>
 </body>
</html>