<!DOCTYPE html>
<html ⚡ lang="en">
<head>
<meta charset="utf-8"/>
<meta content="width=device-width" name="viewport"/>
<link href="/8bitcc.ico" rel="icon" type="image/png"/>
<meta content="$ilp.uphold.com/MGN2ni2YMXaQ" name="monetization" property="monetization"/>
<link href="8bitcc_48x48.png" rel="apple-touch-icon" sizes="48x48"/>
<link href="8bitcc_72x72.png" rel="apple-touch-icon" sizes="72x72"/>
<link href="8bitcc_96x96.png" rel="apple-touch-icon" sizes="96x96"/>
<link href="8bitcc_144x144.png" rel="apple-touch-icon" sizes="144x144"/>
<link href="8bitcc_192x192.png" rel="apple-touch-icon" sizes="192x192"/>
<link href="8bitcc_256x256.png" rel="apple-touch-icon" sizes="256x256"/>
<link href="8bitcc_384x384.png" rel="apple-touch-icon" sizes="384x384"/>
<link href="8bitcc_512x512.png" rel="apple-touch-icon" sizes="512x512"/>
<title>pre-commit is awesome</title>

<style amp-boilerplate="">body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate="">body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
<style amp-custom="">
        h1{font-weight:700}h1,h2,h3,h4,h5,h6{font-family:"Space Mono",monospace}h1{font-size:2.5em;font-family:"Space Mono",monospace;color:#6a65ca;color:#ff66c4}h2{font-size:1.63rem;color:#d68eba}h3{font-family:"Space Mono",monospace}p{font-family:"Space Mono",monospace;color:rgba(255,255,255,.6);font-size:21px;font-style:normal;font-variant:normal;font-weight:400;line-height:1.5}@media only screen and (max-width:700px){p{font-size:18px}}@media only screen and (max-width:600px){p{font-size:16px}}@media only screen and (max-width:500px){p{font-size:14px}}@media only screen and (max-width:400px){p{font-size:12px}}blockquote{font-family:"Space Mono",monospace}code{font-family:"Space Mono",monospace}pre{font-family:"Segoe UI",Frutiger,"Frutiger Linotype","Dejavu Sans","Helvetica Neue",Arial,sans-serif;font-family:"Space Mono",monospace;font-family:"Space Mono",monospace}a{font-family:"Space Mono",monospace;color:#6f6bae;text-decoration-color:goldenrod}*{box-sizing:border-box}*{font-family:"SF Mono",Monaco,Inconsolata,"Fira Mono","Droid Sans Mono","Source Code Pro",monospace}article,body,div,footer,header,hgroup,html,nav,section{position:relative;display:flex;align-items:center;flex-direction:column;flex-shrink:0}li,p,ul{margin:0;padding:0}p{margin-bottom:1rem}body,html{min-height:100vh;max-width:100%;width:100%;margin:0;padding:2rem;overflow-x:hidden;color:#fafafa;display:flex;padding:0;background-size:800px;min-height:100vh;background:#282c34;background:linear-gradient(81deg,#282c34 0,#3a2e3d 100%)}section{margin-bottom:5rem}h1{color:#ff66c4}ul.archive-list{box-shadow:0 0 2rem rgba(0,0,0,.3),-8rem -6rem 8rem -6rem rgba(253,221,88,.2),4rem 0 8rem rgba(88,82,185,.3),0 0 2rem -1.6rem rgba(255,215,70,.8);margin:0;padding:0;list-style-type:none;margin-top:1rem}li.post{margin:0;width:100%;list-style-type:none;border-width:1px;border-style:solid;border-image:linear-gradient(to right,#ff66c4,rgba(255,102,196,.2)) 1 0 0 0}li.post:nth-child(2n-1){background-color:rgba(255,255,255,.01);background-image:linear-gradient(22deg,rgba(255,255,255,0),rgba(255,255,255,.03))}li.post:nth-child(2n){background-color:rgba(0,0,0,.02);background-image:linear-gradient(22deg,rgba(0,0,0,0),rgba(0,0,0,.03))}li.post a{color:#fafafa;text-decoration:none}li.post h2,li.post p{max-width:800px;width:calc(100vw - 100px)}li.post h2,li.post p{margin-left:2rem;margin-right:2rem}li.post a:focus-visible h2,li.post:hover h2{color:#ff66c4}p{color:#d3d3d3}li.post a:focus-visible p,li.post:hover p{color:#fafafa}nav{padding:1rem 0;align-items:flex-end;max-width:1000px;width:100%}nav ul{list-style-type:none;display:flex}nav ul li{margin:0 .4rem}nav ul li a{text-align:center;color:#dcdcdc;text-decoration:none;padding:.5rem;margin-left:.1rem;margin-right:.1rem;align-items:flex-end}nav ul li a:focus-visible,nav ul li:hover a,ul.archive-tags li a:focus-visible,ul.archive-tags li:hover a{color:#ff66c4}ul.archive-tags{display:flex;justify-content:center;list-style-type:none;color:#dcdcdc;border-bottom:1px solid rgba(255,255,255,.1);margin-bottom:2rem;width:100%}ul.archive-tags li{padding:.2rem 1rem}ul.archive-tags li a{text-decoration:none;color:#fafafa}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}#cover-wrapper{z-index:2;width:100%;min-height:min(420px,100vw / 2.38)}#cover-wrapper img{width:calc(100% + 2rem);margin:-2rem}#title-wrapper{display:flex;justify-content:flex-end;align-items:flex-end;width:calc(100% + 2rem);left:-1rem;padding:8rem 1rem 0;margin-top:-8rem;margin-bottom:2.2rem;background:linear-gradient(149deg,#282c34 0,rgba(58,46,61,0) 100%);border-bottom:1px solid #daa520}#title-wrapper h1{margin-top:8rem;margin-bottom:0;word-break:break-all}#title-wrapper p{text-align:right;padding-left:0;margin-bottom:0;margin-top:0}#title-wrapper a{color:#daa520;text-decoration:none}#title-wrapper .h-card .content{display:flex;flex-direction:column;align-items:flex-end;margin:1rem 0}.p-note,.post-date{color:rgba(255,255,255,.2)}#title-wrapper a:focus-visible,#title-wrapper a:hover{color:#ff66c4}article.blog-post,div#post-body{display:block}article.blog-post .toc a{padding:.5rem}article.blog-post .toc li{margin:1rem}article.blog-post .toc ul{list-style-type:none;border:none;padding:0;margin:0 0 .5rem}article.blog-post div.toc{margin-bottom:1rem}article.blog-post div.toc:after{content:'';display:block;width:50%;border-bottom:1px solid #daa520}h2.toc{margin-bottom:1rem;text-align:center;color:rgba(255,255,255,.8)}.toc li{margin:1rem}.toc a{color:rgba(255,255,255,.5)}.toc a:focus-visible,.toc a:hover{color:#ff66c4}article.blog-post li>code,article.blog-post p>code{background:rgba(255,20,147,.075);padding:0 .2rem}article.blog-post{overflow:hidden;background:rgba(51,0,38,.13);background:hsla(234,33%,15%,.66);display:block;margin:.2rem;width:min(95vw,1000px);position:relative;margin:2rem 0;padding:1rem;padding-bottom:5rem;border-radius:2px;box-shadow:.2rem .2rem 1rem rgba(0,0,0,.2);flex-direction:column;align-items:flex-start;color:#f5f5f5}@media (max-width:650px){article.blog-post{width:100vw;width:min(100vw,1000px)}}@media (max-width:1200px){article.blog-post h1{font-size:2.5rem;padding:1rem}}@media (max-width:1200px){article.blog-post h2{padding-left:1rem}}@media (max-width:1200px){article.blog-post h3{padding-left:1.4rem}}@media (max-width:1200px){article.blog-post h4,article.blog-post h5,article.blog-post h6{padding-left:1.6rem}}@media (max-width:1200px){article.blog-post{margin:0;padding:0;margin:0}}article.blog-post p{margin:2rem .8rem}@media (max-width:1200px){article.blog-post p{margin:2rem .8rem}article.blog-post ol,article.blog-post ul{padding:1.2rem}}article.blog-post pre{margin-bottom:1rem;align-self:flex-start;max-width:calc(100vw - 20px);padding:10px;overflow-x:auto}article.blog-post .highlight{background:#282c34;padding:1rem;margin:0 -1rem;width:calc(100% + 2rem)}article.blog-post a{color:#6f6bae;text-decoration-color:#330026;text-decoration-color:goldenrod}@media (max-width:1200px){p>img{left:-.8rem}}p>img{position:relative;box-shadow:.2rem .2rem 1rem rgba(51,0,38,.4);max-width:1000px;width:95vw;align-self:center;justify-self:center;align-items:center;justify-items:center;margin:auto;left:-1.6rem}.center-img>img{max-width:600px;margin:.5rem}.center-img{display:flex;justify-content:center}strong{color:#d68fbb;display:inline-block;transform:rotate(-2deg)}em{color:#6f6bae;display:inline-block;transform:rotate(.2deg);background:rgba(255,255,255,.04);padding:.1rem .8rem}h2{margin-top:5rem}article.blog-post ul{border-left:1px solid #ff66c4;padding:.5rem 0 .025rem 3rem;margin:2rem}blockquote{color:#777;background:rgba(255,20,147,.05);border-left:2px solid #daa520;font-size:1rem;padding:1rem 0 1rem .5rem;margin:2rem 0}hr{border:none;border-top:1px solid #daa520;margin:5rem auto;background:0 0;width:min(600px,80%)}h1{margin-top:5rem}.tweet{display:flex;justify-content:flex-end;margin:1rem 0}.tweet a{display:inline-block;border-radius:5px;padding:.5rem 1rem;background:#645fc4;color:#fedd58;text-decoration:none;vertical-align:center}.share{max-width:800px;margin:.8rem auto;padding:1rem 2rem;display:flex;align-items:center;border:1px solid #d68fbb;background-color:rgba(214,143,187,.1);border-radius:5px}.share a{padding:.2rem .5rem}.share p{margin:0;padding:0;padding-right:.2rem}.share ul li{margin:0;padding:0}.shrare ul{display:flex;list-style-type:none;margin:0;padding:0;border:none;font-size:1.3rem}.post-body hr{border-top:2px solid rgba(218,165,32,.2);margin:3rem 40%}.h-card{border-radius:5px;display:flex;align-items:center;justify-content:flex-end}.h-card img{width:50px;border-radius:50%;margin:.2rem;display:none}.h-card ul.social{list-style-type:none;border:none;margin:0;padding:0}.social{display:flex}.social li{list-style-type:None}.social a{color:#daa520;padding:1rem .2rem}.h-card li{margin:0;padding:0}.toc{width:min(90vw,600px);margin:auto;position:initial;font-size:.8rem;line-height:1.1rem}.toc li{padding:0;margin:0}.toc li.H1,.toc li.H2{padding-top:.8rem}.toc li.H3{padding-left:.5rem}.toc li.H4{padding-left:1rem}.toc li.H5{padding-left:1.25rem}.toc li.H6{padding-left:1.5rem}@media (min-width:1500px){.toc{display:none}}.twitter-tweet{margin:10px auto}.onelinelink-wrapper{max-width:100vw}a.onelinelink{position:relative;left:2rem;background:#262236;margin:-6rem auto 1rem;border:2px solid rgba(255,50,50,.1);max-width:300px;border-radius:15px/45px;display:block;flex-direction:row}@media (max-width:350px){a.onelinelink{left:0;margin-left:.4rem;margin-right:.4rem}}@media (min-width:800px){a.onelinelink{max-width:600px;margin:auto}}@media (min-width:900px){a.onelinelink{max-width:700px}}@media (min-width:1000px){a.onelinelink{max-width:800px}}a.onelinelink{position:relative;z-index:2;margin:4rem;overflow:hidden;display:flex;border:2px solid rgba(255,50,50,.1);background:rgba(255,50,50,.015);background:#262236;text-decoration:none;border-radius:8px;max-height:126px}@media (max-width:800px){a.onelinelink{flex-direction:column;max-height:800px;max-width:300px;margin:4rem auto}}a.onelinelink h2{top:-1.2rem;postition:relative;margin:0;padding:0;font-size:.8rem;font-weight:400}a.onelinelink .right{width:calc(100% - 250px - 4rem);padding:5px 15px}@media (max-width:800px){a.onelinelink .right{width:auto}}a.onelinelink .description{font-size:1rem;line-height:1.2rem;height:calc(100% - 31px - 1rem);padding:0;padding-bottom:1rem;padding-top:.1rem;margin:0}a.onelinelink .url{padding-right:30px;color:rgba(255,255,255,.1);text-align:right;position:relative;z-index:2;background:#262236}a.onelinelink img{max-width:300px;max-height:126px;padding:0;margin:0;border-radius:8px 0 0 8px}a.onelinelink .read-more{font-size:.6rem;color:rgba(255,255,255,.08)}table{border-collapse:collapse;margin:auto}table,td,th{border:1px solid rgba(255,255,255,.4);min-width:5rem;padding:.2rem}.speed-control{display:flex;flex-direction:row;justify-content:center;margin-top:-.2rem;padding:1rem 0 .5rem;background:rgba(0,0,0,.3)}.speed-control button{margin:.4;transition:all .2s;border:.1rem solid #d3d3d3;color:#d3d3d3;background:0 0;text-align:center;padding:.35rem 1.2rem;margin:.1rem .5rem;border-radius:.12rem}.speed-control button:hover{color:#000;background:#d3d3d3}body::-webkit-scrollbar{width:1rem}@media (max-width:1000px){body::-webkit-scrollbar{width:.5rem}}@media (max-width:425px){body::-webkit-scrollbar{width:.25rem}}html{scroll-behavior:smooth;scrollbar-width:thin;scrollbar-color:#5651B7}body::-webkit-scrollbar-track{background:#392e3d}body::-webkit-scrollbar-thumb{background-color:#5651b7;border-radius:.25rem;background:#706bd0;background:linear-gradient(180deg,#706bd0 0,#5651b7 100%);border:1px solid rgba(86j,81,183,.5)}
    </style>
<meta content="article" name="og:type" property="og:type"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="#322D39" name="theme-color"/><meta content="Waylon Walker" name="og:author" property="og:author"/><meta content="waylon@waylonwalaker.com" name="og:author_email" property="og:author_email"/><meta content="website" name="og:type" property="og:type"/><meta content="I recently discovered the ✨ awesomeness that is pre-commit. I steered away I recently discovered the ✨ awesomeness that is pre-commit. I steered away from it fo" name="description" property="description"/><meta content="I recently discovered the ✨ awesomeness that is pre-commit. I steered away I recently discovered the ✨ awesomeness that is pre-commit. I steered away from it fo" name="og:description" property="og:description"/><meta content="I recently discovered the ✨ awesomeness that is pre-commit. I steered away I recently discovered the ✨ awesomeness that is pre-commit. I steered away from it fo" name="twitter:description" property="twitter:description"/><meta content="pre-commit is awesome | Waylon Walker" name="og:title" property="og:title"/><meta content="pre-commit is awesome | Waylon Walker" name="twitter:title" property="twitter:title"/><meta content="https://images.waylonwalker.com/pre-commit-is-awesome-og.png" name="og:image" property="og:image"/><meta content="https://images.waylonwalker.com/pre-commit-is-awesome-og.png" name="twitter:image" property="twitter:image"/><meta content="1600" name="og:image:width" property="og:image:width"/><meta content="900" name="og:image:width" property="og:image:width"/><meta content="summary_large_image" name="twitter:card" property="twitter:card"/><meta content="Waylon Walker" name="og:site_name" property="og:site_name"/><meta content="@_waylonwalker" name="twitter:creator" property="twitter:creator"/><meta content="pre-commit is awesome" name="title" property="title"/><meta content="markata 0.1.0" name="generator" property="generator"/><script async src="https://cdn.ampproject.org/v0.js"></script><link href="https://waylonwalker.com/pre-commit-is-awesome/" rel="canonical"/><meta content="https://waylonwalker.com/pre-commit-is-awesome/" name="og:url" property="og:url"/></head>
<body>
<nav>
<ul>
<li><a href="/">Home</a></li>
<li><a href="/archive/">Archive</a></li>
<li>
<a aria-label="RSS" href="/rss.xml">
<svg class="icon" height="16" viewbox="0 0 24 24" width="16" xmlns="http://www.w3.org/2000/svg">
<path d="M 4 4.44 v 2.83 c 7.03 0 12.73 5.7 12.73 12.73 h 2.83 c 0 -8.59 -6.97 -15.56 -15.56 -15.56 Z m 0 5.66 v 2.83 c 3.9 0 7.07 3.17 7.07 7.07 h 2.83 c 0 -5.47 -4.43 -9.9 -9.9 -9.9 Z M 6.18 15.64 A 2.18 2.18 0 0 1 6.18 20 A 2.18 2.18 0 0 1 6.18 15.64" fill="currentColor">
</path>
</svg>
</a>
</li>
</ul>
</nav>
<article class="blog-post h-entry">
<!-- <div id='cover-wrapper'>
      <img src='/pre-commit-is-awesome.webp' alt='cover image for article' />
    </div> -->
<div id="title-wrapper">
<a class="u-url" href="https://waylonwalker.com/pre-commit-is-awesome/">
<h1 class="flair" id="title" style="text-align:right;z-index:2;padding-right:.2rem">pre-commit is awesome
                </h1>
</a>
<p><time class="dt-published post-date" datetime="2020-06-05" style="text-align:right;z-index:2">2020-06-05</time>
</p>
<div class="h-card p-author" rel="author">
<div class="content">
<a class="p-name u-url" href="https://waylonwalker.com/">
<p>
<span class="p-given-name">Waylon</span>
<span class="p-family-name">Walker</span>
</p>
</a>
<p class="p-note">Learning in Public <a href="https://twitter.com/_WaylonWalker">@waylonwalker</a></p>
</div>
</div>
<!-- edit -->
<p><a href="https://github.com/WaylonWalker/waylonwalker.com/edit/main/pages/blog/pre-commit-is-awesome.md" title="edit this post">edit<span aria-label="" role="img">✏️</span></a></p>
</div>
<!-- <h2 class='toc'>toc</h2> -->
<!-- -->
<div id="amp-message">
<p style="background: rgba(0,0,0,0.1); padding: .5rem 3rem; margin: 2rem 0rem;">
          ⚡ You've discovered an amp page, if you bump into any issues such as
          syntax highlighting feel free to jump to the <a href="https://waylonwalker.com/pre-commit-is-awesome/">normal page</a>
</p>
</div>
<div id="post-body">
<p>I recently discovered the ✨ awesomeness that is pre-commit. I steered away
from it for so long because it seemed like a big daunting thing to set up, but
really it's easy. It will automatically run checks for you. In some cases, it
will even automatically fix them for you. Out of the box, it will do things
like automatically trim extra whitespace, fix file endings, and ensure file
sizes are not too large for git.</p>
<p>I recently discovered the ✨ awesomeness that is pre-commit. I steered away from it for so long because it seemed like a big daunting thing to set up, but really it's easy. It will automatically run checks for you. In some cases, it will even automatically fix them for you. Out of the box, it will do things like automatically trim extra whitespace, fix file endings, and ensure file sizes are not too large for git.</p>
<h2 id="quickstart">Quickstart</h2>
<p>It comes with a <code>sample-config</code> that is pretty general purpose and use for just about any project in git.</p>
<div class="highlight"><pre><span></span><code>pip instal pre-commit
pre-commit sample-config &gt; .pre-commit-config.yaml
pre-commit install
git add .
git commit -m <span class="s2">"added pre-commit"</span>
</code></pre></div>
<h2 id="cloned-repo">Cloned Repo</h2>
<p>Once someone has created the <code>.pre-commit-config.yaml</code> everyone on the team will want to be running it for consistency's sake. (make sure everyone agrees with the config you have chosen first). Simply install the existing config.</p>
<div class="highlight"><pre><span></span><code>pip install pre-commit
git clone &lt;repo&gt;
pre-commit install
git add .
git commit -m <span class="s2">"added pre-commit"</span>
</code></pre></div>
<h2 id="sample-config">sample-config</h2>
<p>The sample configuration does some really basic, file ending, trailing-whitespace fixing. And checks for files too large for git. This one saved me when I tried to commit linux <code>rpm</code> once 🤦‍♀️.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># See https://pre-commit.com for more information</span><span class="w"></span>
<span class="c1"># See https://pre-commit.com/hooks.html for more hooks</span><span class="w"></span>
<span class="nt">repos</span><span class="p">:</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/pre-commit-hooks</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">rev</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2.4.0</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">trailing-whitespace</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">end-of-file-fixer</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-yaml</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-added-large-files</span><span class="w"></span>
</code></pre></div>
<h2 id="adding-some-extras-from-pre-commit-themselves">Adding some extras from pre-commit themselves</h2>
<p>Here I have added a couple of extra ones form pre-commit</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-case-conflict</span><span class="w"> </span><span class="c1"># Check for files that would conflict in case-insensitive filesystems</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">check-merge-conflict</span><span class="w"> </span><span class="c1"># Check for files that contain merge conflict strings.</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">debug-statements</span><span class="w"> </span><span class="c1"># Check for debugger imports and py37+ `breakpoint()` calls in python source.</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">requirements-txt-fixer</span><span class="w"> </span><span class="c1"># Sorts entries in requirements.txt</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">forbid-new-submodules</span><span class="w"> </span><span class="c1"># Check for git submodules</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">flake8</span><span class="w"> </span><span class="c1"># runs python flake8</span><span class="w"></span>
</code></pre></div>
<p>The submodules one is big. I have seen several folks trying to learn git for the first time mistakenly start nesting all of their projects underneath each other and eventually losing a lot of work. Trying to learn the command line and git all at once can be really confusing.</p>
<h2 id="skip-pre-commit">skip pre-commit</h2>
<p>So you have a big codebase and you are trying to get pre-commit ready, but you just need your changes in.</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">git commit -m "commiting wihout pre-commit" --no-verify</span><span class="w"></span>
</code></pre></div>
<h2 id="manually-run-pre-commit">manually run pre-commit</h2>
<p>If you have an existing repo and want to run pre-commit on everything, since it was pre-existing, you can do that manually.</p>
<div class="highlight"><pre><span></span><code><span class="l l-Scalar l-Scalar-Plain">pre-commit run --all-files</span><span class="w"></span>
</code></pre></div>
<h2 id="so-pre-commit-changed-some-files">So pre-commit changed some files</h2>
<p>Since <code>pre-commit</code> only runs against staged files, but makes changes to the local files you need to add them.</p>
<p>Here is a git status after committing with some trailing whitespace issues.</p>
<div class="highlight"><pre><span></span><code>❯ git status
On branch main
Changes to be committed:
  <span class="o">(</span>use <span class="s2">"git restore --staged &lt;file&gt;..."</span> to unstage<span class="o">)</span>
        modified: README.md

Changes not staged <span class="k">for</span> commit:
  <span class="o">(</span>use <span class="s2">"git add &lt;file&gt;..."</span> to update what will be committed<span class="o">)</span>
  <span class="o">(</span>use <span class="s2">"git restore &lt;file&gt;..."</span> to discard changes <span class="k">in</span> working directory<span class="o">)</span>
        modified: README.md
</code></pre></div>
<p><code>pre-commit</code> will keep yelling at you about <code>trailing whitespace</code> until you add the files.</p>
<div class="highlight"><pre><span></span><code>git add README.md
</code></pre></div>
<h2 id="community-developed-plugins">Community Developed plugins</h2>
<p><em>give me more</em></p>
<p>These almost make it <strong>too</strong> easy. Sharing your process to get up and running without <code>pre-commit</code> can involve a lot of instructions. Installing several different tools, then running them manually, probably forgetting to do so sometimes. These will automatically install and only run scoped to the files that have changed, not on the whole repo.</p>
<h3 id="isort">isort</h3>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/asottile/seed-isort-config</span><span class="w"></span>
<span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v2.1.1</span><span class="w"></span>
<span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">seed-isort-config</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/mirrors-isort</span><span class="w"></span>
<span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v4.3.21</span><span class="w"></span>
<span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">isort</span><span class="w"></span>
</code></pre></div>
<h3 id="isortcfg">.isort.cfg</h3>
<p>In order to get isort to play nicely with black, I found great success with the following config placed in the root of the repo at <code>.isort.cfg</code>. Without these settings, I found that you commits will consistently fail checks because <code>isort</code> and <code>black</code> are fighting each other.</p>
<div class="highlight"><pre><span></span><code><span class="k">[settings]</span><span class="w"></span>
<span class="n">multi_line_output</span><span class="o">=</span><span class="mi">3</span><span class="w"></span>
<span class="n">include_trailing_comma</span><span class="o">=</span><span class="n">True</span><span class="w"></span>
<span class="n">force_grid_wrap</span><span class="o">=</span><span class="mi">0</span><span class="w"></span>
<span class="n">use_parentheses</span><span class="o">=</span><span class="n">True</span><span class="w"></span>
<span class="n">line_length</span><span class="o">=</span><span class="mi">88</span><span class="w"></span>
</code></pre></div>
<h3 id="flake8">.flake8</h3>
<p>Just as with <code>isort</code> flake8 tends to complain about a few things that black does. To get them to play nicely together place this file in the root of the repo at <code>.flake8</code>.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># taken from black</span><span class="w"></span>
<span class="c1"># added E231 as is conflicts with black formatting</span><span class="w"></span>
<span class="k">[flake8]</span><span class="w"></span>
<span class="n">ignore</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">E203</span><span class="p">,</span><span class="w"> </span><span class="n">E266</span><span class="p">,</span><span class="w"> </span><span class="n">E501</span><span class="p">,</span><span class="w"> </span><span class="n">W503</span><span class="p">,</span><span class="w"> </span><span class="n">E231</span><span class="p">,</span><span class="w"> </span><span class="n">F541</span><span class="w"></span>
<span class="n">max-line-length</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">88</span><span class="w"></span>
<span class="n">max-complexity</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="mi">18</span><span class="w"></span>
<span class="n">select</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">B</span><span class="p">,</span><span class="n">C</span><span class="p">,</span><span class="n">E</span><span class="p">,</span><span class="n">F</span><span class="p">,</span><span class="n">W</span><span class="p">,</span><span class="n">T4</span><span class="p">,</span><span class="n">B9</span><span class="w"></span>
</code></pre></div>
<h3 id="black">black</h3>
<p>Black is an amazing CLI tool the python community has been blessed with. It was developed by python core dev Lukasz Langa after deep research of real python projects. It will autoformat your project and will check that the AST before and after remains the same ensuring that the code will run exactly the same. It only makes it more readable. I keep black installed and set to run on save. Many times I will bang out some sloppy code with long lines or poor indentation hit save and let black take care of the easy work.</p>
<div class="highlight"><pre><span></span><code><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/asottile/blacken-docs</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">rev</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v1.7.0</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">blacken-docs</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">additional_dependencies</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">black</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/psf/black</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">rev</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">19.3b0</span><span class="w"></span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hooks</span><span class="p p-Indicator">:</span><span class="w"></span>
<span class="w">        </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">black</span><span class="w"></span>
</code></pre></div>
<h3 id="mypy">mypy</h3>
<p>I have recently fallen in love with mypy. It has saved me from shipping some bugs that would not have been caught with tests, even with 100% coverage. I don't have 100% coverage across every possible type entered.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">https://github.com/pre-commit/mirrors-mypy</span><span class="w"></span>
<span class="w">      </span><span class="nt">rev</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">v0.720</span><span class="w"></span>
<span class="w">      </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">mypy</span><span class="w"></span>
<span class="w">            </span><span class="nt">exclude</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">tests/</span><span class="w"></span>
</code></pre></div>
<h2 id="your-own-plugin">Your own plugin</h2>
<p>Sometimes you have a CLI tool that you want to run, but there is no plugin. No worries, you can install manually set the repo to local, and add an entry for your CLI command to run.</p>
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">repo</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">local</span><span class="w"></span>
<span class="w">      </span><span class="nt">hooks</span><span class="p">:</span><span class="w"></span>
<span class="w">          </span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">id</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">interrogate</span><span class="w"></span>
<span class="w">          </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="s">"Interrogate</span><span class="nv"> </span><span class="s">docstring</span><span class="nv"> </span><span class="s">coverage</span><span class="nv"> </span><span class="s">check"</span><span class="w"></span>
<span class="w">          </span><span class="nt">types</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">[</span><span class="nv">file</span><span class="p p-Indicator">,</span><span class="w"> </span><span class="nv">python</span><span class="p p-Indicator">]</span><span class="w"></span>
<span class="w">          </span><span class="nt">entry</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">interrogate -f 100 -vv</span><span class="w"></span>
</code></pre></div>
<hr/>
<p>I have been writing short snippets about my mentality breaking into the tech/data industry in my newsletter, 👇 check it out and lets get the conversation started.</p>
<p><a href="https://emailoctopus.com/lists/b194a4af-9875-11ea-a3d0-06b4694bee2a/forms/subscribe"><amp-img height="500" layout="responsive" src="https://images.waylonwalker.com/waylon-walker-newsletter.png" width="500"></amp-img></a></p>
<div class="prevnext">

<a class="prev" href="/pyflyby">
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M13.5 8.25L9.75 12L13.5 15.75" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"> </path>
</svg>
<div class="prevnext-text">
<p class="prevnext-subtitle">prev</p>
<p class="prevnext-title">Smoother Python with automatic imports | pyflyby</p>
</div>
</a>
<a class="next" href="/practice-python-online">
<div class="prevnext-text">
<p class="prevnext-subtitle">next</p>
<p class="prevnext-title">🐍 Practice Python Online</p>
</div>
<svg fill="none" height="50px" viewbox="0 0 24 24" width="50px" xmlns="http://www.w3.org/2000/svg">
<path d="M10.5 15.75L14.25 12L10.5 8.25" stroke="var(--prevnext-color-angle)" stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"></path>
</svg>
</a>
</div>
</div>
<hr/>
<div id="show">
</div>
</article>
<h2>Socials</h2>
<ul class="social">
<li>
<a href="https://twitter.com/_WaylonWalker">twitter</a>
</li>
<li>
<a href="https://www.linkedin.com/in/waylonwalker/">LinkedIn</a>
</li>
<li>
<a href="https://github.com/WaylonWalker">GitHub</a>
</li>
<li>
<a href="https://dev.to/waylonwalker">Dev.to</a>
</li>
<li>
<a href="https://www.twitch.tv/waylonwalker">twitch</a>
</li>
</ul>
</body>
</html>